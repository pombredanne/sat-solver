<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>satsolver: src/solverdebug.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="dir_4422304925a660d7ad9b44d0ebab103c.html">src</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>solverdebug.c</h1>  </div>
</div>
<div class="contents">
<a href="solverdebug_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) 2008, Novell Inc.</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This program is licensed under the BSD license, read LICENSE.BSD</span>
<a name="l00005"></a>00005 <span class="comment"> * for further information</span>
<a name="l00006"></a>00006 <span class="comment"> */</span>
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="comment">/*</span>
<a name="l00009"></a>00009 <span class="comment"> * solverdebug.c</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> * debug functions for the SAT solver</span>
<a name="l00012"></a>00012 <span class="comment"> */</span>
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &lt;unistd.h&gt;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &lt;assert.h&gt;</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;<a class="code" href="solver_8h.html">solver.h</a>&quot;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;<a class="code" href="solverdebug_8h.html">solverdebug.h</a>&quot;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;<a class="code" href="bitmap_8h.html">bitmap.h</a>&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="pool_8h.html">pool.h</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="poolarch_8h.html">poolarch.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="util_8h.html">util.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="evr_8h.html">evr.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="policy_8h.html">policy.h</a>&quot;</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="comment">/*</span>
<a name="l00031"></a>00031 <span class="comment"> * create obsoletesmap from solver decisions</span>
<a name="l00032"></a>00032 <span class="comment"> *</span>
<a name="l00033"></a>00033 <span class="comment"> * for solvables in installed repo:</span>
<a name="l00034"></a>00034 <span class="comment"> *   0 - not obsoleted</span>
<a name="l00035"></a>00035 <span class="comment"> *   p - one of the packages that obsolete us</span>
<a name="l00036"></a>00036 <span class="comment"> * for all others:</span>
<a name="l00037"></a>00037 <span class="comment"> *   n - number of packages this package obsoletes</span>
<a name="l00038"></a>00038 <span class="comment"> *</span>
<a name="l00039"></a>00039 <span class="comment"> */</span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="comment">/* OBSOLETE: use transaction code instead! */</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> *
<a name="l00044"></a><a class="code" href="solverdebug_8h.html#a3ac3cdc97e6506d42379007afc05149e">00044</a> <a class="code" href="solver_8h.html#a3ac3cdc97e6506d42379007afc05149e">solver_create_decisions_obsoletesmap</a>(<a class="code" href="struct__Solver.html">Solver</a> *solv)
<a name="l00045"></a>00045 {
<a name="l00046"></a>00046   <a class="code" href="struct__Pool.html">Pool</a> *<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a> = solv-&gt;<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a>;
<a name="l00047"></a>00047   <a class="code" href="struct__Repo.html">Repo</a> *<a class="code" href="struct__Solver.html#a7e7a99dd14a73a3f38f17e24381c50c3">installed</a> = solv-&gt;<a class="code" href="struct__Solver.html#a7e7a99dd14a73a3f38f17e24381c50c3">installed</a>;
<a name="l00048"></a>00048   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> p, *obsoletesmap = NULL;
<a name="l00049"></a>00049   <span class="keywordtype">int</span> i;
<a name="l00050"></a>00050   <a class="code" href="struct__Solvable.html">Solvable</a> *s;
<a name="l00051"></a>00051 
<a name="l00052"></a>00052   obsoletesmap = (<a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> *)<a class="code" href="util_8c.html#a7964924c069160718b17ac2770d6885d">sat_calloc</a>(pool-&gt;<a class="code" href="struct__Pool.html#a00e935f7b65616513799ac9e26fefa31">nsolvables</a>, <span class="keyword">sizeof</span>(<a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a>));
<a name="l00053"></a>00053   <span class="keywordflow">if</span> (installed)
<a name="l00054"></a>00054     {
<a name="l00055"></a>00055       <span class="keywordflow">for</span> (i = 0; i &lt; solv-&gt;<a class="code" href="struct__Solver.html#a4314de5a9845a917ae438e32800763e4">decisionq</a>.<a class="code" href="struct__Queue.html#abb0696a77174cd23b5f488ad4c7b45d2">count</a>; i++)
<a name="l00056"></a>00056         {
<a name="l00057"></a>00057           <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> pp, n;
<a name="l00058"></a>00058           <span class="keywordtype">int</span> noobs;
<a name="l00059"></a>00059 
<a name="l00060"></a>00060           n = solv-&gt;<a class="code" href="struct__Solver.html#a4314de5a9845a917ae438e32800763e4">decisionq</a>.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i];
<a name="l00061"></a>00061           <span class="keywordflow">if</span> (n &lt; 0)
<a name="l00062"></a>00062             <span class="keywordflow">continue</span>;
<a name="l00063"></a>00063           <span class="keywordflow">if</span> (n == <a class="code" href="pool_8h.html#abd207d4eeed4b96e8dd1a25e2dce7f52">SYSTEMSOLVABLE</a>)
<a name="l00064"></a>00064             <span class="keywordflow">continue</span>;
<a name="l00065"></a>00065           s = pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a> + n;
<a name="l00066"></a>00066           <span class="keywordflow">if</span> (s-&gt;<a class="code" href="struct__Solvable.html#a15e0b77fe061c6429a24215191b10f05">repo</a> == installed)             <span class="comment">/* obsoletes don&#39;t count for already installed packages */</span>
<a name="l00067"></a>00067             <span class="keywordflow">continue</span>;
<a name="l00068"></a>00068           noobs = solv-&gt;<a class="code" href="struct__Solver.html#abba5557c05bf04391f2729e530e17595">noobsoletes</a>.<a class="code" href="struct__Map.html#a6f33ba32c40c61ac1ab1c96919b77ee0">size</a> &amp;&amp; <a class="code" href="bitmap_8h.html#ad8ccb9ad3a8ad65f5fe08a988acc503d">MAPTST</a>(&amp;solv-&gt;<a class="code" href="struct__Solver.html#abba5557c05bf04391f2729e530e17595">noobsoletes</a>, n);
<a name="l00069"></a>00069           <a class="code" href="pool_8h.html#a6529dc5dd039f8d1019aa2e6f9a9011f">FOR_PROVIDES</a>(p, pp, s-&gt;<a class="code" href="struct__Solvable.html#a5912021e2c3fe505c24a92aa7639dff2">name</a>)
<a name="l00070"></a>00070             {
<a name="l00071"></a>00071               <a class="code" href="struct__Solvable.html">Solvable</a> *ps = pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a> + p;
<a name="l00072"></a>00072               <span class="keywordflow">if</span> (noobs &amp;&amp; (s-&gt;<a class="code" href="struct__Solvable.html#a5912021e2c3fe505c24a92aa7639dff2">name</a> != ps-&gt;<a class="code" href="struct__Solvable.html#a5912021e2c3fe505c24a92aa7639dff2">name</a> || s-&gt;<a class="code" href="struct__Solvable.html#ae776af434c21800db6c01a75c2e6a4f6">evr</a> != ps-&gt;<a class="code" href="struct__Solvable.html#ae776af434c21800db6c01a75c2e6a4f6">evr</a> || s-&gt;<a class="code" href="struct__Solvable.html#a51ba374144373934101befc2bd20150b">arch</a> != ps-&gt;<a class="code" href="struct__Solvable.html#a51ba374144373934101befc2bd20150b">arch</a>))
<a name="l00073"></a>00073                 <span class="keywordflow">continue</span>;
<a name="l00074"></a>00074               <span class="keywordflow">if</span> (!pool-&gt;<a class="code" href="struct__Pool.html#abc2e01f9f1f4833c256d836b0a9e4387">implicitobsoleteusesprovides</a> &amp;&amp; s-&gt;<a class="code" href="struct__Solvable.html#a5912021e2c3fe505c24a92aa7639dff2">name</a> != ps-&gt;<a class="code" href="struct__Solvable.html#a5912021e2c3fe505c24a92aa7639dff2">name</a>)
<a name="l00075"></a>00075                 <span class="keywordflow">continue</span>;
<a name="l00076"></a>00076               <span class="keywordflow">if</span> (pool-&gt;<a class="code" href="struct__Pool.html#acdf3981cb1a41707c6ddf7efe9a105f0">obsoleteusescolors</a> &amp;&amp; !<a class="code" href="poolarch_8h.html#a03fb65256662cbc0b0027bbc82992a2e">pool_colormatch</a>(pool, s, ps))
<a name="l00077"></a>00077                 <span class="keywordflow">continue</span>;
<a name="l00078"></a>00078               <span class="keywordflow">if</span> (ps-&gt;<a class="code" href="struct__Solvable.html#a15e0b77fe061c6429a24215191b10f05">repo</a> == installed &amp;&amp; !obsoletesmap[p])
<a name="l00079"></a>00079                 {
<a name="l00080"></a>00080                   obsoletesmap[p] = n;
<a name="l00081"></a>00081                   obsoletesmap[n]++;
<a name="l00082"></a>00082                 }
<a name="l00083"></a>00083             }
<a name="l00084"></a>00084         }
<a name="l00085"></a>00085       <span class="keywordflow">for</span> (i = 0; i &lt; solv-&gt;<a class="code" href="struct__Solver.html#a4314de5a9845a917ae438e32800763e4">decisionq</a>.<a class="code" href="struct__Queue.html#abb0696a77174cd23b5f488ad4c7b45d2">count</a>; i++)
<a name="l00086"></a>00086         {
<a name="l00087"></a>00087           <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> obs, *obsp;
<a name="l00088"></a>00088           <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> pp, n;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090           n = solv-&gt;<a class="code" href="struct__Solver.html#a4314de5a9845a917ae438e32800763e4">decisionq</a>.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i];
<a name="l00091"></a>00091           <span class="keywordflow">if</span> (n &lt; 0)
<a name="l00092"></a>00092             <span class="keywordflow">continue</span>;
<a name="l00093"></a>00093           <span class="keywordflow">if</span> (n == <a class="code" href="pool_8h.html#abd207d4eeed4b96e8dd1a25e2dce7f52">SYSTEMSOLVABLE</a>)
<a name="l00094"></a>00094             <span class="keywordflow">continue</span>;
<a name="l00095"></a>00095           s = pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a> + n;
<a name="l00096"></a>00096           <span class="keywordflow">if</span> (s-&gt;<a class="code" href="struct__Solvable.html#a15e0b77fe061c6429a24215191b10f05">repo</a> == installed)             <span class="comment">/* obsoletes don&#39;t count for already installed packages */</span>
<a name="l00097"></a>00097             <span class="keywordflow">continue</span>;
<a name="l00098"></a>00098           <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="struct__Solvable.html#a2eb11a5e84d9a4141fd44e9e9f2d0124">obsoletes</a>)
<a name="l00099"></a>00099             <span class="keywordflow">continue</span>;
<a name="l00100"></a>00100           <span class="keywordflow">if</span> (solv-&gt;<a class="code" href="struct__Solver.html#abba5557c05bf04391f2729e530e17595">noobsoletes</a>.<a class="code" href="struct__Map.html#a6f33ba32c40c61ac1ab1c96919b77ee0">size</a> &amp;&amp; <a class="code" href="bitmap_8h.html#ad8ccb9ad3a8ad65f5fe08a988acc503d">MAPTST</a>(&amp;solv-&gt;<a class="code" href="struct__Solver.html#abba5557c05bf04391f2729e530e17595">noobsoletes</a>, n))
<a name="l00101"></a>00101             <span class="keywordflow">continue</span>;
<a name="l00102"></a>00102           obsp = s-&gt;<a class="code" href="struct__Solvable.html#a15e0b77fe061c6429a24215191b10f05">repo</a>-&gt;<a class="code" href="struct__Repo.html#afddcfa36231cc08266800bee5b978528">idarraydata</a> + s-&gt;<a class="code" href="struct__Solvable.html#a2eb11a5e84d9a4141fd44e9e9f2d0124">obsoletes</a>;
<a name="l00103"></a>00103           <span class="keywordflow">while</span> ((obs = *obsp++) != 0)
<a name="l00104"></a>00104             {
<a name="l00105"></a>00105               <a class="code" href="pool_8h.html#a6529dc5dd039f8d1019aa2e6f9a9011f">FOR_PROVIDES</a>(p, pp, obs)
<a name="l00106"></a>00106                 {
<a name="l00107"></a>00107                   <a class="code" href="struct__Solvable.html">Solvable</a> *ps = pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a> + p;
<a name="l00108"></a>00108                   <span class="keywordflow">if</span> (!pool-&gt;<a class="code" href="struct__Pool.html#a6983b12a5c8fd406fe85ac343914ac30">obsoleteusesprovides</a> &amp;&amp; !<a class="code" href="pool_8h.html#a1f2bd95045b7a58d9237da8aeaeee6de">pool_match_nevr</a>(pool, ps, obs))
<a name="l00109"></a>00109                     <span class="keywordflow">continue</span>;
<a name="l00110"></a>00110                   <span class="keywordflow">if</span> (pool-&gt;<a class="code" href="struct__Pool.html#acdf3981cb1a41707c6ddf7efe9a105f0">obsoleteusescolors</a> &amp;&amp; !<a class="code" href="poolarch_8h.html#a03fb65256662cbc0b0027bbc82992a2e">pool_colormatch</a>(pool, s, ps))
<a name="l00111"></a>00111                     <span class="keywordflow">continue</span>;
<a name="l00112"></a>00112                   <span class="keywordflow">if</span> (pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a>[p].<a class="code" href="struct__Solvable.html#a15e0b77fe061c6429a24215191b10f05">repo</a> == installed &amp;&amp; !obsoletesmap[p])
<a name="l00113"></a>00113                     {
<a name="l00114"></a>00114                       obsoletesmap[p] = n;
<a name="l00115"></a>00115                       obsoletesmap[n]++;
<a name="l00116"></a>00116                     }
<a name="l00117"></a>00117                 }
<a name="l00118"></a>00118             }
<a name="l00119"></a>00119         }
<a name="l00120"></a>00120     }
<a name="l00121"></a>00121   <span class="keywordflow">return</span> obsoletesmap;
<a name="l00122"></a>00122 }
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 <span class="keywordtype">void</span>
<a name="l00125"></a><a class="code" href="solverdebug_8h.html#a39c3c65f25d7f240bbab377b6f7a7a4a">00125</a> <a class="code" href="solverdebug_8c.html#a39c3c65f25d7f240bbab377b6f7a7a4a">solver_printruleelement</a>(<a class="code" href="struct__Solver.html">Solver</a> *solv, <span class="keywordtype">int</span> type, <a class="code" href="struct__Rule.html">Rule</a> *r, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> v)
<a name="l00126"></a>00126 {
<a name="l00127"></a>00127   <a class="code" href="struct__Pool.html">Pool</a> *<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a> = solv-&gt;<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a>;
<a name="l00128"></a>00128   <a class="code" href="struct__Solvable.html">Solvable</a> *s;
<a name="l00129"></a>00129   <span class="keywordflow">if</span> (v &lt; 0)
<a name="l00130"></a>00130     {
<a name="l00131"></a>00131       s = pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a> + -v;
<a name="l00132"></a>00132       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;    !%s [%d]&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s), -v);
<a name="l00133"></a>00133     }
<a name="l00134"></a>00134   <span class="keywordflow">else</span>
<a name="l00135"></a>00135     {
<a name="l00136"></a>00136       s = pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a> + v;
<a name="l00137"></a>00137       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;    %s [%d]&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s), v);
<a name="l00138"></a>00138     }
<a name="l00139"></a>00139   <span class="keywordflow">if</span> (pool-&gt;<a class="code" href="struct__Pool.html#a887053f905054298cd61ce1c99e26690">installed</a> &amp;&amp; s-&gt;<a class="code" href="struct__Solvable.html#a15e0b77fe061c6429a24215191b10f05">repo</a> == pool-&gt;<a class="code" href="struct__Pool.html#a887053f905054298cd61ce1c99e26690">installed</a>)
<a name="l00140"></a>00140     <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;I&quot;</span>);
<a name="l00141"></a>00141   <span class="keywordflow">if</span> (r)
<a name="l00142"></a>00142     {
<a name="l00143"></a>00143       <span class="keywordflow">if</span> (r-&gt;<a class="code" href="struct__Rule.html#a7e862a105d71a5fa8f927e4b8ce5987d">w1</a> == v)
<a name="l00144"></a>00144         <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot; (w1)&quot;</span>);
<a name="l00145"></a>00145       <span class="keywordflow">if</span> (r-&gt;<a class="code" href="struct__Rule.html#a0037f66f0f655e0cc7b8387c8c001918">w2</a> == v)
<a name="l00146"></a>00146         <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot; (w2)&quot;</span>);
<a name="l00147"></a>00147     }
<a name="l00148"></a>00148   <span class="keywordflow">if</span> (solv-&gt;<a class="code" href="struct__Solver.html#a2554a6d5fcef4960540b0b89cf96ee1f">decisionmap</a>[s - pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a>] &gt; 0)
<a name="l00149"></a>00149     <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot; Install.level%d&quot;</span>, solv-&gt;<a class="code" href="struct__Solver.html#a2554a6d5fcef4960540b0b89cf96ee1f">decisionmap</a>[s - pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a>]);
<a name="l00150"></a>00150   <span class="keywordflow">if</span> (solv-&gt;<a class="code" href="struct__Solver.html#a2554a6d5fcef4960540b0b89cf96ee1f">decisionmap</a>[s - pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a>] &lt; 0)
<a name="l00151"></a>00151     <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot; Conflict.level%d&quot;</span>, -solv-&gt;<a class="code" href="struct__Solver.html#a2554a6d5fcef4960540b0b89cf96ee1f">decisionmap</a>[s - pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a>]);
<a name="l00152"></a>00152   <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00153"></a>00153 }
<a name="l00154"></a>00154 
<a name="l00155"></a>00155 
<a name="l00156"></a>00156 <span class="comment">/*</span>
<a name="l00157"></a>00157 <span class="comment"> * print rule</span>
<a name="l00158"></a>00158 <span class="comment"> */</span>
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 <span class="keywordtype">void</span>
<a name="l00161"></a><a class="code" href="solverdebug_8h.html#a4ece7d4a6925f876d536eb8f0d987d5e">00161</a> <a class="code" href="solverdebug_8c.html#a4ece7d4a6925f876d536eb8f0d987d5e">solver_printrule</a>(<a class="code" href="struct__Solver.html">Solver</a> *solv, <span class="keywordtype">int</span> type, <a class="code" href="struct__Rule.html">Rule</a> *r)
<a name="l00162"></a>00162 {
<a name="l00163"></a>00163   <a class="code" href="struct__Pool.html">Pool</a> *<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a> = solv-&gt;<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a>;
<a name="l00164"></a>00164   <span class="keywordtype">int</span> i;
<a name="l00165"></a>00165   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> d, v;
<a name="l00166"></a>00166 
<a name="l00167"></a>00167   <span class="keywordflow">if</span> (r &gt;= solv-&gt;<a class="code" href="struct__Solver.html#adbb8496d066269639e4b03645cd4ced5">rules</a> &amp;&amp; r &lt; solv-&gt;<a class="code" href="HowItWorks_8doc.html#ac23ed37ca0d07e4f7dccf4251ad0ccd8">rules</a> + solv-&gt;<a class="code" href="struct__Solver.html#a93ee4069027657b55a639fa96bc22388">nrules</a>)   <span class="comment">/* r is a solver rule */</span>
<a name="l00168"></a>00168     <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;Rule #%d:&quot;</span>, (<span class="keywordtype">int</span>)(r - solv-&gt;<a class="code" href="struct__Solver.html#adbb8496d066269639e4b03645cd4ced5">rules</a>));
<a name="l00169"></a>00169   <span class="keywordflow">else</span>
<a name="l00170"></a>00170     <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;Rule:&quot;</span>);                 <span class="comment">/* r is any rule */</span>
<a name="l00171"></a>00171   <span class="keywordflow">if</span> (r &amp;&amp; r-&gt;<a class="code" href="struct__Rule.html#aa9e1be345a2c6b0f2b1d91e77a2e16e5">d</a> &lt; 0)
<a name="l00172"></a>00172     <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot; (disabled)&quot;</span>);
<a name="l00173"></a>00173   <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00174"></a>00174   d = r-&gt;<a class="code" href="struct__Rule.html#aa9e1be345a2c6b0f2b1d91e77a2e16e5">d</a> &lt; 0 ? -r-&gt;<a class="code" href="struct__Rule.html#aa9e1be345a2c6b0f2b1d91e77a2e16e5">d</a> - 1 : r-&gt;<a class="code" href="struct__Rule.html#aa9e1be345a2c6b0f2b1d91e77a2e16e5">d</a>;
<a name="l00175"></a>00175   <span class="keywordflow">for</span> (i = 0; ; i++)
<a name="l00176"></a>00176     {
<a name="l00177"></a>00177       <span class="keywordflow">if</span> (i == 0)
<a name="l00178"></a>00178           <span class="comment">/* print direct literal */</span>
<a name="l00179"></a>00179         v = r-&gt;<a class="code" href="struct__Rule.html#a0824dc73143b58ed4b6a60f17e44fdf5">p</a>;
<a name="l00180"></a>00180       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!d)
<a name="l00181"></a>00181         {
<a name="l00182"></a>00182           <span class="keywordflow">if</span> (i == 2)
<a name="l00183"></a>00183             <span class="keywordflow">break</span>;
<a name="l00184"></a>00184           <span class="comment">/* binary rule --&gt; print w2 as second literal */</span>
<a name="l00185"></a>00185           v = r-&gt;<a class="code" href="struct__Rule.html#a0037f66f0f655e0cc7b8387c8c001918">w2</a>;
<a name="l00186"></a>00186         }
<a name="l00187"></a>00187       <span class="keywordflow">else</span>
<a name="l00188"></a>00188           <span class="comment">/* every other which is in d */</span>
<a name="l00189"></a>00189         v = solv-&gt;<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a>-&gt;<a class="code" href="struct__Pool.html#a0cdb8c9d12440e6e59b7b569259ef493">whatprovidesdata</a>[d + i - 1];
<a name="l00190"></a>00190       <span class="keywordflow">if</span> (v == ID_NULL)
<a name="l00191"></a>00191         <span class="keywordflow">break</span>;
<a name="l00192"></a>00192       <a class="code" href="solverdebug_8c.html#a39c3c65f25d7f240bbab377b6f7a7a4a">solver_printruleelement</a>(solv, type, r, v);
<a name="l00193"></a>00193     }
<a name="l00194"></a>00194   <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;    next rules: %d %d\n&quot;</span>, r-&gt;<a class="code" href="struct__Rule.html#a6f14744fd19b4b40cd3c4861d9a5a3ee">n1</a>, r-&gt;<a class="code" href="struct__Rule.html#a8a29e6b8c37ef1d486cd062f8fddcd71">n2</a>);
<a name="l00195"></a>00195 }
<a name="l00196"></a>00196 
<a name="l00197"></a>00197 <span class="keywordtype">void</span>
<a name="l00198"></a><a class="code" href="solverdebug_8h.html#a1d1727cebc70171c9d79859e0d00109f">00198</a> <a class="code" href="solverdebug_8c.html#a1d1727cebc70171c9d79859e0d00109f">solver_printruleclass</a>(<a class="code" href="struct__Solver.html">Solver</a> *solv, <span class="keywordtype">int</span> type, <a class="code" href="struct__Rule.html">Rule</a> *r)
<a name="l00199"></a>00199 {
<a name="l00200"></a>00200   <a class="code" href="struct__Pool.html">Pool</a> *<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a> = solv-&gt;<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a>;
<a name="l00201"></a>00201   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> p = r - solv-&gt;<a class="code" href="struct__Solver.html#adbb8496d066269639e4b03645cd4ced5">rules</a>;
<a name="l00202"></a>00202   assert(p &gt;= 0);
<a name="l00203"></a>00203   <span class="keywordflow">if</span> (p &lt; solv-&gt;<a class="code" href="struct__Solver.html#ae7cd8c5decf37ac92db7d6037e8abe31">learntrules</a>)
<a name="l00204"></a>00204     <span class="keywordflow">if</span> (<a class="code" href="bitmap_8h.html#ad8ccb9ad3a8ad65f5fe08a988acc503d">MAPTST</a>(&amp;solv-&gt;<a class="code" href="struct__Solver.html#ab522119c48bc65181e3619850efa97ce">weakrulemap</a>, p))
<a name="l00205"></a>00205       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;WEAK &quot;</span>);
<a name="l00206"></a>00206   <span class="keywordflow">if</span> (solv-&gt;<a class="code" href="struct__Solver.html#ae7cd8c5decf37ac92db7d6037e8abe31">learntrules</a> &amp;&amp; p &gt;= solv-&gt;<a class="code" href="struct__Solver.html#ae7cd8c5decf37ac92db7d6037e8abe31">learntrules</a>)
<a name="l00207"></a>00207     <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;LEARNT &quot;</span>);
<a name="l00208"></a>00208   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p &gt;= solv-&gt;<a class="code" href="struct__Solver.html#aea18615885ae8f734f50be49557ddf25">choicerules</a> &amp;&amp; p &lt; solv-&gt;<a class="code" href="struct__Solver.html#ad55ff11f3be4f912d4bc0fab1dedb510">choicerules_end</a>)
<a name="l00209"></a>00209     <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;CHOICE &quot;</span>);
<a name="l00210"></a>00210   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p &gt;= solv-&gt;<a class="code" href="struct__Solver.html#acc195576c0c97a6434600a532225917f">infarchrules</a> &amp;&amp; p &lt; solv-&gt;<a class="code" href="struct__Solver.html#ac26ce4c4629c3dfbbc7c47c5d68c57aa">infarchrules_end</a>)
<a name="l00211"></a>00211     <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;INFARCH &quot;</span>);
<a name="l00212"></a>00212   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p &gt;= solv-&gt;<a class="code" href="struct__Solver.html#a89cfe62da13159d79a75ec8224013307">duprules</a> &amp;&amp; p &lt; solv-&gt;<a class="code" href="struct__Solver.html#a652d74df5680d2232bb8806e14b5eec8">duprules_end</a>)
<a name="l00213"></a>00213     <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;DUP &quot;</span>);
<a name="l00214"></a>00214   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p &gt;= solv-&gt;<a class="code" href="struct__Solver.html#a8de76bf18047b3259f5350b541f22800">jobrules</a> &amp;&amp; p &lt; solv-&gt;<a class="code" href="struct__Solver.html#aaeb462f8b787baba6cefba9d47cd16f6">jobrules_end</a>)
<a name="l00215"></a>00215     <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;JOB &quot;</span>);
<a name="l00216"></a>00216   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p &gt;= solv-&gt;<a class="code" href="struct__Solver.html#a8556e5d1eb46912e7890ec154f12f526">updaterules</a> &amp;&amp; p &lt; solv-&gt;<a class="code" href="struct__Solver.html#ad1b32eb261a7e50ad8bd6247fe5b40ef">updaterules_end</a>)
<a name="l00217"></a>00217     <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;UPDATE &quot;</span>);
<a name="l00218"></a>00218   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p &gt;= solv-&gt;<a class="code" href="struct__Solver.html#ae7c5ef6e7c5da7c85b89994118afd2a3">featurerules</a> &amp;&amp; p &lt; solv-&gt;<a class="code" href="struct__Solver.html#ad2351c2c5f3683ec3e53a52692966f18">featurerules_end</a>)
<a name="l00219"></a>00219     <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;FEATURE &quot;</span>);
<a name="l00220"></a>00220   <a class="code" href="solverdebug_8c.html#a4ece7d4a6925f876d536eb8f0d987d5e">solver_printrule</a>(solv, type, r);
<a name="l00221"></a>00221 }
<a name="l00222"></a>00222 
<a name="l00223"></a>00223 <span class="keywordtype">void</span>
<a name="l00224"></a><a class="code" href="solverdebug_8h.html#a87bc8198f57ed93b87cc7cf08d878692">00224</a> <a class="code" href="solverdebug_8c.html#a87bc8198f57ed93b87cc7cf08d878692">solver_printproblem</a>(<a class="code" href="struct__Solver.html">Solver</a> *solv, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> v)
<a name="l00225"></a>00225 {
<a name="l00226"></a>00226   <a class="code" href="struct__Pool.html">Pool</a> *<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a> = solv-&gt;<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a>;
<a name="l00227"></a>00227   <span class="keywordtype">int</span> i;
<a name="l00228"></a>00228   <a class="code" href="struct__Rule.html">Rule</a> *r;
<a name="l00229"></a>00229   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> *jp;
<a name="l00230"></a>00230 
<a name="l00231"></a>00231   <span class="keywordflow">if</span> (v &gt; 0)
<a name="l00232"></a>00232     <a class="code" href="solverdebug_8c.html#a1d1727cebc70171c9d79859e0d00109f">solver_printruleclass</a>(solv, <a class="code" href="pool_8h.html#afd737f722763bdc0c84084d762343f51">SAT_DEBUG_SOLUTIONS</a>, solv-&gt;<a class="code" href="struct__Solver.html#adbb8496d066269639e4b03645cd4ced5">rules</a> + v);
<a name="l00233"></a>00233   <span class="keywordflow">else</span>
<a name="l00234"></a>00234     {
<a name="l00235"></a>00235       v = -(v + 1);
<a name="l00236"></a>00236       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#afd737f722763bdc0c84084d762343f51">SAT_DEBUG_SOLUTIONS</a>, <span class="stringliteral">&quot;JOB %d\n&quot;</span>, v);
<a name="l00237"></a>00237       jp = solv-&gt;<a class="code" href="struct__Solver.html#a10c20c3a8916dd7c7084a02fcd597f75">ruletojob</a>.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>;
<a name="l00238"></a>00238       <span class="keywordflow">for</span> (i = solv-&gt;<a class="code" href="struct__Solver.html#a8de76bf18047b3259f5350b541f22800">jobrules</a>, r = solv-&gt;<a class="code" href="struct__Solver.html#adbb8496d066269639e4b03645cd4ced5">rules</a> + i; i &lt; solv-&gt;<a class="code" href="struct__Solver.html#aaeb462f8b787baba6cefba9d47cd16f6">jobrules_end</a>; i++, r++, jp++)
<a name="l00239"></a>00239         <span class="keywordflow">if</span> (*jp == v)
<a name="l00240"></a>00240           {
<a name="l00241"></a>00241             <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#afd737f722763bdc0c84084d762343f51">SAT_DEBUG_SOLUTIONS</a>, <span class="stringliteral">&quot;- &quot;</span>);
<a name="l00242"></a>00242             <a class="code" href="solverdebug_8c.html#a4ece7d4a6925f876d536eb8f0d987d5e">solver_printrule</a>(solv, <a class="code" href="pool_8h.html#afd737f722763bdc0c84084d762343f51">SAT_DEBUG_SOLUTIONS</a>, r);
<a name="l00243"></a>00243           }
<a name="l00244"></a>00244       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#afd737f722763bdc0c84084d762343f51">SAT_DEBUG_SOLUTIONS</a>, <span class="stringliteral">&quot;ENDJOB\n&quot;</span>);
<a name="l00245"></a>00245     }
<a name="l00246"></a>00246 }
<a name="l00247"></a>00247 
<a name="l00248"></a>00248 <span class="keywordtype">void</span>
<a name="l00249"></a><a class="code" href="solverdebug_8h.html#a28692b8fb91836b2e14b1fe43d225c9d">00249</a> <a class="code" href="solverdebug_8c.html#a28692b8fb91836b2e14b1fe43d225c9d">solver_printwatches</a>(<a class="code" href="struct__Solver.html">Solver</a> *solv, <span class="keywordtype">int</span> type)
<a name="l00250"></a>00250 {
<a name="l00251"></a>00251   <a class="code" href="struct__Pool.html">Pool</a> *<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a> = solv-&gt;<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a>;
<a name="l00252"></a>00252   <span class="keywordtype">int</span> counter;
<a name="l00253"></a>00253 
<a name="l00254"></a>00254   <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;Watches: \n&quot;</span>);
<a name="l00255"></a>00255   <span class="keywordflow">for</span> (counter = -(pool-&gt;<a class="code" href="struct__Pool.html#a00e935f7b65616513799ac9e26fefa31">nsolvables</a> - 1); counter &lt; pool-&gt;nsolvables; counter++)
<a name="l00256"></a>00256     <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;    solvable [%d] -- rule [%d]\n&quot;</span>, counter, solv-&gt;<a class="code" href="struct__Solver.html#a0a8cf0923220a71dca42f31122c0e02e">watches</a>[counter + pool-&gt;<a class="code" href="struct__Pool.html#a00e935f7b65616513799ac9e26fefa31">nsolvables</a>]);
<a name="l00257"></a>00257 }
<a name="l00258"></a>00258 
<a name="l00259"></a>00259 <span class="keywordtype">void</span>
<a name="l00260"></a><a class="code" href="solverdebug_8h.html#a519624df72134d4933648a49c4b8fb0c">00260</a> <a class="code" href="solverdebug_8c.html#a519624df72134d4933648a49c4b8fb0c">solver_printdecisionq</a>(<a class="code" href="struct__Solver.html">Solver</a> *solv, <span class="keywordtype">int</span> type)
<a name="l00261"></a>00261 {
<a name="l00262"></a>00262   <a class="code" href="struct__Pool.html">Pool</a> *<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a> = solv-&gt;<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a>;
<a name="l00263"></a>00263   <span class="keywordtype">int</span> i;
<a name="l00264"></a>00264   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> p, why;
<a name="l00265"></a>00265 
<a name="l00266"></a>00266   <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;Decisions:\n&quot;</span>);
<a name="l00267"></a>00267   <span class="keywordflow">for</span> (i = 0; i &lt; solv-&gt;<a class="code" href="struct__Solver.html#a4314de5a9845a917ae438e32800763e4">decisionq</a>.<a class="code" href="struct__Queue.html#abb0696a77174cd23b5f488ad4c7b45d2">count</a>; i++)
<a name="l00268"></a>00268     {
<a name="l00269"></a>00269       p = solv-&gt;<a class="code" href="struct__Solver.html#a4314de5a9845a917ae438e32800763e4">decisionq</a>.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i];
<a name="l00270"></a>00270       <span class="keywordflow">if</span> (p &gt; 0)
<a name="l00271"></a>00271         <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;%d %d install  %s, &quot;</span>, i, solv-&gt;<a class="code" href="struct__Solver.html#a2554a6d5fcef4960540b0b89cf96ee1f">decisionmap</a>[p], <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, p));
<a name="l00272"></a>00272       <span class="keywordflow">else</span>
<a name="l00273"></a>00273         <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;%d %d conflict %s, &quot;</span>, i, -solv-&gt;<a class="code" href="struct__Solver.html#a2554a6d5fcef4960540b0b89cf96ee1f">decisionmap</a>[-p], <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, -p));
<a name="l00274"></a>00274       why = solv-&gt;<a class="code" href="struct__Solver.html#abd47006ee5afb8f31d8a9bd3a7cd3aaa">decisionq_why</a>.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i];
<a name="l00275"></a>00275       <span class="keywordflow">if</span> (why &gt; 0)
<a name="l00276"></a>00276         {
<a name="l00277"></a>00277           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;forced by &quot;</span>);
<a name="l00278"></a>00278           <a class="code" href="solverdebug_8c.html#a1d1727cebc70171c9d79859e0d00109f">solver_printruleclass</a>(solv, type, solv-&gt;<a class="code" href="struct__Solver.html#adbb8496d066269639e4b03645cd4ced5">rules</a> + why);
<a name="l00279"></a>00279         }
<a name="l00280"></a>00280       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (why &lt; 0)
<a name="l00281"></a>00281         {
<a name="l00282"></a>00282           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;chosen from &quot;</span>);
<a name="l00283"></a>00283           <a class="code" href="solverdebug_8c.html#a1d1727cebc70171c9d79859e0d00109f">solver_printruleclass</a>(solv, type, solv-&gt;<a class="code" href="struct__Solver.html#adbb8496d066269639e4b03645cd4ced5">rules</a> - why);
<a name="l00284"></a>00284         }
<a name="l00285"></a>00285       <span class="keywordflow">else</span>
<a name="l00286"></a>00286         <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(type, <span class="stringliteral">&quot;picked for some unknown reason.\n&quot;</span>);
<a name="l00287"></a>00287     }
<a name="l00288"></a>00288 }
<a name="l00289"></a>00289 
<a name="l00290"></a>00290 <span class="comment">/*</span>
<a name="l00291"></a>00291 <span class="comment"> * printdecisions</span>
<a name="l00292"></a>00292 <span class="comment"> */</span>
<a name="l00293"></a>00293 
<a name="l00294"></a>00294 <span class="keywordtype">void</span>
<a name="l00295"></a><a class="code" href="solverdebug_8h.html#a3fb87397986fb94d64846f51d3cd6261">00295</a> <a class="code" href="solverdebug_8c.html#a3fb87397986fb94d64846f51d3cd6261">solver_printdecisions</a>(<a class="code" href="struct__Solver.html">Solver</a> *solv)
<a name="l00296"></a>00296 {
<a name="l00297"></a>00297   <a class="code" href="struct__Pool.html">Pool</a> *<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a> = solv-&gt;<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a>;
<a name="l00298"></a>00298   <a class="code" href="struct__Repo.html">Repo</a> *<a class="code" href="struct__Solver.html#a7e7a99dd14a73a3f38f17e24381c50c3">installed</a> = solv-&gt;<a class="code" href="struct__Solver.html#a7e7a99dd14a73a3f38f17e24381c50c3">installed</a>;
<a name="l00299"></a>00299   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> p, type;
<a name="l00300"></a>00300   <span class="keywordtype">int</span> i, j;
<a name="l00301"></a>00301   <a class="code" href="struct__Solvable.html">Solvable</a> *s;
<a name="l00302"></a>00302   <a class="code" href="struct__Queue.html">Queue</a> iq;
<a name="l00303"></a>00303 
<a name="l00304"></a>00304   <a class="code" href="pool_8h.html#a7d525665b376c4f9444064a907318e04">IF_POOLDEBUG</a> (<a class="code" href="pool_8h.html#a177eb8a78324eda87b869fbb9d8c768f">SAT_DEBUG_SCHUBI</a>)
<a name="l00305"></a>00305     {
<a name="l00306"></a>00306       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a177eb8a78324eda87b869fbb9d8c768f">SAT_DEBUG_SCHUBI</a>, <span class="stringliteral">&quot;----- Decisions -----\n&quot;</span>);
<a name="l00307"></a>00307       <span class="keywordflow">for</span> (i = 0; i &lt; solv-&gt;<a class="code" href="struct__Solver.html#a4314de5a9845a917ae438e32800763e4">decisionq</a>.<a class="code" href="struct__Queue.html#abb0696a77174cd23b5f488ad4c7b45d2">count</a>; i++)
<a name="l00308"></a>00308         {
<a name="l00309"></a>00309           p = solv-&gt;<a class="code" href="struct__Solver.html#a4314de5a9845a917ae438e32800763e4">decisionq</a>.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i];
<a name="l00310"></a>00310           <a class="code" href="solverdebug_8c.html#a39c3c65f25d7f240bbab377b6f7a7a4a">solver_printruleelement</a>(solv, <a class="code" href="pool_8h.html#a177eb8a78324eda87b869fbb9d8c768f">SAT_DEBUG_SCHUBI</a>, 0, p);
<a name="l00311"></a>00311         }
<a name="l00312"></a>00312       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a177eb8a78324eda87b869fbb9d8c768f">SAT_DEBUG_SCHUBI</a>, <span class="stringliteral">&quot;----- Decisions end -----\n&quot;</span>);
<a name="l00313"></a>00313     }
<a name="l00314"></a>00314 
<a name="l00315"></a>00315   <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00316"></a>00316   <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;transaction:\n&quot;</span>);
<a name="l00317"></a>00317 
<a name="l00318"></a>00318   <a class="code" href="queue_8c.html#ae1a64f63dd8cc46bdb2bcd415aa89e5a">queue_init</a>(&amp;iq);
<a name="l00319"></a>00319   <span class="keywordflow">for</span> (i = 0; i &lt; solv-&gt;<a class="code" href="struct__Solver.html#aa509a3a1ff87e89c8475d608e45ba24a">trans</a>.<a class="code" href="struct__Transaction.html#a7e05d837578f51e0a26658a2ae37fc4d">steps</a>.<a class="code" href="struct__Queue.html#abb0696a77174cd23b5f488ad4c7b45d2">count</a>; i++)
<a name="l00320"></a>00320     {
<a name="l00321"></a>00321       p = solv-&gt;<a class="code" href="struct__Solver.html#aa509a3a1ff87e89c8475d608e45ba24a">trans</a>.<a class="code" href="struct__Transaction.html#a7e05d837578f51e0a26658a2ae37fc4d">steps</a>.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i];
<a name="l00322"></a>00322       s = pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a> + p;
<a name="l00323"></a>00323       type = <a class="code" href="transaction_8c.html#a2b3fe1e25edd92e0853f45b7ebdbb5af">transaction_type</a>(&amp;solv-&gt;<a class="code" href="struct__Solver.html#aa509a3a1ff87e89c8475d608e45ba24a">trans</a>, p, <a class="code" href="transaction_8h.html#a908897c491200d2f1cbe84e89e9754d2">SOLVER_TRANSACTION_SHOW_ACTIVE</a>|<a class="code" href="transaction_8h.html#aab5654bf90e6612aed581955534812a9">SOLVER_TRANSACTION_SHOW_ALL</a>|<a class="code" href="transaction_8h.html#a7502a80e35d239877c08ff4dd98621ef">SOLVER_TRANSACTION_SHOW_OBSOLETES</a>|<a class="code" href="transaction_8h.html#a55586b4056617eff343aa21c5b203ace">SOLVER_TRANSACTION_SHOW_MULTIINSTALL</a>);
<a name="l00324"></a>00324       <span class="keywordflow">switch</span>(type)
<a name="l00325"></a>00325         {
<a name="l00326"></a>00326         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#a57fdcc82ed23ac10402ef9c06a72e8f6">SOLVER_TRANSACTION_MULTIINSTALL</a>:
<a name="l00327"></a>00327           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  multi install %s&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00328"></a>00328           <span class="keywordflow">break</span>;
<a name="l00329"></a>00329         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#a19678a508979033e52ed586ae047e492">SOLVER_TRANSACTION_MULTIREINSTALL</a>:
<a name="l00330"></a>00330           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  multi reinstall %s&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00331"></a>00331           <span class="keywordflow">break</span>;
<a name="l00332"></a>00332         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#abb82d7761ad043a7a1082477101fd750">SOLVER_TRANSACTION_INSTALL</a>:
<a name="l00333"></a>00333           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  install   %s&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00334"></a>00334           <span class="keywordflow">break</span>;
<a name="l00335"></a>00335         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#adfe9de0dd1b2a90968875c4aec0efc90">SOLVER_TRANSACTION_REINSTALL</a>:
<a name="l00336"></a>00336           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  reinstall %s&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00337"></a>00337           <span class="keywordflow">break</span>;
<a name="l00338"></a>00338         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#a45d58863d7cabd1a3ea7f08812bfcec7">SOLVER_TRANSACTION_DOWNGRADE</a>:
<a name="l00339"></a>00339           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  downgrade %s&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00340"></a>00340           <span class="keywordflow">break</span>;
<a name="l00341"></a>00341         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#a7a095cf21eaf69f25c85917c9bf1ea13">SOLVER_TRANSACTION_CHANGE</a>:
<a name="l00342"></a>00342           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  change    %s&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00343"></a>00343           <span class="keywordflow">break</span>;
<a name="l00344"></a>00344         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#addd1e33bbde775d8fb1902254a3f799c">SOLVER_TRANSACTION_UPGRADE</a>:
<a name="l00345"></a>00345         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#aaabe26749b590e688dd72404e30e013f">SOLVER_TRANSACTION_OBSOLETES</a>:
<a name="l00346"></a>00346           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  upgrade   %s&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00347"></a>00347           <span class="keywordflow">break</span>;
<a name="l00348"></a>00348         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#a6628972c54e3ec89ee96acb65b435642">SOLVER_TRANSACTION_ERASE</a>:
<a name="l00349"></a>00349           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  erase     %s&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00350"></a>00350           <span class="keywordflow">break</span>;
<a name="l00351"></a>00351         <span class="keywordflow">default</span>:
<a name="l00352"></a>00352           <span class="keywordflow">break</span>;
<a name="l00353"></a>00353         }
<a name="l00354"></a>00354       <span class="keywordflow">switch</span>(type)
<a name="l00355"></a>00355         {
<a name="l00356"></a>00356         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#abb82d7761ad043a7a1082477101fd750">SOLVER_TRANSACTION_INSTALL</a>:
<a name="l00357"></a>00357         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#a6628972c54e3ec89ee96acb65b435642">SOLVER_TRANSACTION_ERASE</a>:
<a name="l00358"></a>00358         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#a57fdcc82ed23ac10402ef9c06a72e8f6">SOLVER_TRANSACTION_MULTIINSTALL</a>:
<a name="l00359"></a>00359         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#a19678a508979033e52ed586ae047e492">SOLVER_TRANSACTION_MULTIREINSTALL</a>:
<a name="l00360"></a>00360           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00361"></a>00361           <span class="keywordflow">break</span>;
<a name="l00362"></a>00362         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#adfe9de0dd1b2a90968875c4aec0efc90">SOLVER_TRANSACTION_REINSTALL</a>:
<a name="l00363"></a>00363         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#a45d58863d7cabd1a3ea7f08812bfcec7">SOLVER_TRANSACTION_DOWNGRADE</a>:
<a name="l00364"></a>00364         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#a7a095cf21eaf69f25c85917c9bf1ea13">SOLVER_TRANSACTION_CHANGE</a>:
<a name="l00365"></a>00365         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#addd1e33bbde775d8fb1902254a3f799c">SOLVER_TRANSACTION_UPGRADE</a>:
<a name="l00366"></a>00366         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#aaabe26749b590e688dd72404e30e013f">SOLVER_TRANSACTION_OBSOLETES</a>:
<a name="l00367"></a>00367           <a class="code" href="transaction_8c.html#aaa33152cda972dad9f684b64e376ea05">transaction_all_obs_pkgs</a>(&amp;solv-&gt;<a class="code" href="struct__Solver.html#aa509a3a1ff87e89c8475d608e45ba24a">trans</a>, p, &amp;iq);
<a name="l00368"></a>00368           <span class="keywordflow">if</span> (iq.<a class="code" href="struct__Queue.html#abb0696a77174cd23b5f488ad4c7b45d2">count</a>)
<a name="l00369"></a>00369             {
<a name="l00370"></a>00370               <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  (obsoletes&quot;</span>);
<a name="l00371"></a>00371               <span class="keywordflow">for</span> (j = 0; j &lt; iq.<a class="code" href="struct__Queue.html#abb0696a77174cd23b5f488ad4c7b45d2">count</a>; j++)
<a name="l00372"></a>00372                 <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot; %s&quot;</span>, <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, iq.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[j]));
<a name="l00373"></a>00373               <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;)&quot;</span>);
<a name="l00374"></a>00374             }
<a name="l00375"></a>00375           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00376"></a>00376           <span class="keywordflow">break</span>;
<a name="l00377"></a>00377         <span class="keywordflow">default</span>:
<a name="l00378"></a>00378           <span class="keywordflow">break</span>;
<a name="l00379"></a>00379         }
<a name="l00380"></a>00380     }
<a name="l00381"></a>00381   <a class="code" href="queue_8c.html#a701c81a9f7d503837e74d43981e79137">queue_free</a>(&amp;iq);
<a name="l00382"></a>00382 
<a name="l00383"></a>00383   <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00384"></a>00384 
<a name="l00385"></a>00385   <span class="keywordflow">if</span> (solv-&gt;<a class="code" href="struct__Solver.html#ace329c44badd73790268c31ac19140eb">recommendations</a>.<a class="code" href="struct__Queue.html#abb0696a77174cd23b5f488ad4c7b45d2">count</a>)
<a name="l00386"></a>00386     {
<a name="l00387"></a>00387       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;recommended packages:\n&quot;</span>);
<a name="l00388"></a>00388       <span class="keywordflow">for</span> (i = 0; i &lt; solv-&gt;<a class="code" href="struct__Solver.html#ace329c44badd73790268c31ac19140eb">recommendations</a>.<a class="code" href="struct__Queue.html#abb0696a77174cd23b5f488ad4c7b45d2">count</a>; i++)
<a name="l00389"></a>00389         {
<a name="l00390"></a>00390           s = pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a> + solv-&gt;<a class="code" href="struct__Solver.html#ace329c44badd73790268c31ac19140eb">recommendations</a>.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i];
<a name="l00391"></a>00391           <span class="keywordflow">if</span> (solv-&gt;<a class="code" href="struct__Solver.html#a2554a6d5fcef4960540b0b89cf96ee1f">decisionmap</a>[solv-&gt;<a class="code" href="struct__Solver.html#ace329c44badd73790268c31ac19140eb">recommendations</a>.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i]] &gt; 0)
<a name="l00392"></a>00392             {
<a name="l00393"></a>00393               <span class="keywordflow">if</span> (installed &amp;&amp; s-&gt;<a class="code" href="struct__Solvable.html#a15e0b77fe061c6429a24215191b10f05">repo</a> == installed)
<a name="l00394"></a>00394                 <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  %s (installed)\n&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00395"></a>00395               <span class="keywordflow">else</span>
<a name="l00396"></a>00396                 <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  %s (selected)\n&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00397"></a>00397             }
<a name="l00398"></a>00398           <span class="keywordflow">else</span>
<a name="l00399"></a>00399             <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  %s\n&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00400"></a>00400         }
<a name="l00401"></a>00401       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00402"></a>00402     }
<a name="l00403"></a>00403 
<a name="l00404"></a>00404   <span class="keywordflow">if</span> (solv-&gt;<a class="code" href="struct__Solver.html#a9db22c7e868e171b48d42a28fc238e90">suggestions</a>.<a class="code" href="struct__Queue.html#abb0696a77174cd23b5f488ad4c7b45d2">count</a>)
<a name="l00405"></a>00405     {
<a name="l00406"></a>00406       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;suggested packages:\n&quot;</span>);
<a name="l00407"></a>00407       <span class="keywordflow">for</span> (i = 0; i &lt; solv-&gt;<a class="code" href="struct__Solver.html#a9db22c7e868e171b48d42a28fc238e90">suggestions</a>.<a class="code" href="struct__Queue.html#abb0696a77174cd23b5f488ad4c7b45d2">count</a>; i++)
<a name="l00408"></a>00408         {
<a name="l00409"></a>00409           s = pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a> + solv-&gt;<a class="code" href="struct__Solver.html#a9db22c7e868e171b48d42a28fc238e90">suggestions</a>.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i];
<a name="l00410"></a>00410           <span class="keywordflow">if</span> (solv-&gt;<a class="code" href="struct__Solver.html#a2554a6d5fcef4960540b0b89cf96ee1f">decisionmap</a>[solv-&gt;<a class="code" href="struct__Solver.html#a9db22c7e868e171b48d42a28fc238e90">suggestions</a>.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i]] &gt; 0)
<a name="l00411"></a>00411             {
<a name="l00412"></a>00412               <span class="keywordflow">if</span> (installed &amp;&amp; s-&gt;<a class="code" href="struct__Solvable.html#a15e0b77fe061c6429a24215191b10f05">repo</a> == installed)
<a name="l00413"></a>00413                 <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  %s (installed)\n&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00414"></a>00414               <span class="keywordflow">else</span>
<a name="l00415"></a>00415                 <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  %s (selected)\n&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00416"></a>00416             }
<a name="l00417"></a>00417           <span class="keywordflow">else</span>
<a name="l00418"></a>00418             <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  %s\n&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00419"></a>00419         }
<a name="l00420"></a>00420       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00421"></a>00421     }
<a name="l00422"></a>00422   <span class="keywordflow">if</span> (solv-&gt;<a class="code" href="struct__Solver.html#adb1172bd53603d194c32884afcf7bb94">orphaned</a>.<a class="code" href="struct__Queue.html#abb0696a77174cd23b5f488ad4c7b45d2">count</a>)
<a name="l00423"></a>00423     {
<a name="l00424"></a>00424       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;orphaned packages:\n&quot;</span>);
<a name="l00425"></a>00425       <span class="keywordflow">for</span> (i = 0; i &lt; solv-&gt;<a class="code" href="struct__Solver.html#adb1172bd53603d194c32884afcf7bb94">orphaned</a>.<a class="code" href="struct__Queue.html#abb0696a77174cd23b5f488ad4c7b45d2">count</a>; i++)
<a name="l00426"></a>00426         {
<a name="l00427"></a>00427           s = pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a> + solv-&gt;<a class="code" href="struct__Solver.html#adb1172bd53603d194c32884afcf7bb94">orphaned</a>.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i];
<a name="l00428"></a>00428           <span class="keywordflow">if</span> (solv-&gt;<a class="code" href="struct__Solver.html#a2554a6d5fcef4960540b0b89cf96ee1f">decisionmap</a>[solv-&gt;<a class="code" href="struct__Solver.html#adb1172bd53603d194c32884afcf7bb94">orphaned</a>.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i]] &gt; 0)
<a name="l00429"></a>00429             <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  %s (kept)\n&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00430"></a>00430           <span class="keywordflow">else</span>
<a name="l00431"></a>00431             <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  %s (erased)\n&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00432"></a>00432         }
<a name="l00433"></a>00433       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00434"></a>00434     }
<a name="l00435"></a>00435 }
<a name="l00436"></a>00436 
<a name="l00437"></a>00437 <span class="keyword">static</span> <span class="keyword">inline</span>
<a name="l00438"></a><a class="code" href="solverdebug_8c.html#aadc9fea47ffbdef009f12e766f09438a">00438</a> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="solverdebug_8c.html#aadc9fea47ffbdef009f12e766f09438a">id2strnone</a>(<a class="code" href="struct__Pool.html">Pool</a> *<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a>, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <span class="keywordtype">id</span>)
<a name="l00439"></a>00439 {
<a name="l00440"></a>00440   <span class="keywordflow">return</span> !<span class="keywordtype">id</span> || <span class="keywordtype">id</span> == 1 ? <span class="stringliteral">&quot;(none)&quot;</span> : <a class="code" href="poolid_8c.html#a8a844727bd2258ef240555fc629b2fa7">id2str</a>(pool, <span class="keywordtype">id</span>);
<a name="l00441"></a>00441 }
<a name="l00442"></a>00442 
<a name="l00443"></a>00443 <span class="keywordtype">void</span>
<a name="l00444"></a><a class="code" href="solverdebug_8h.html#adc4d35e374268efde7d446e0a36e549c">00444</a> <a class="code" href="solverdebug_8c.html#adc4d35e374268efde7d446e0a36e549c">solver_printtransaction</a>(<a class="code" href="struct__Solver.html">Solver</a> *solv)
<a name="l00445"></a>00445 {
<a name="l00446"></a>00446   <a class="code" href="struct__Transaction.html">Transaction</a> *<a class="code" href="struct__Solver.html#aa509a3a1ff87e89c8475d608e45ba24a">trans</a> = &amp;solv-&gt;<a class="code" href="struct__Solver.html#aa509a3a1ff87e89c8475d608e45ba24a">trans</a>;
<a name="l00447"></a>00447   <a class="code" href="struct__Pool.html">Pool</a> *<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a> = trans-&gt;<a class="code" href="struct__Transaction.html#aeec1bcea114aa72e7c8005b8e08a369b">pool</a>;
<a name="l00448"></a>00448   <a class="code" href="struct__Queue.html">Queue</a> classes, pkgs;
<a name="l00449"></a>00449   <span class="keywordtype">int</span> i, j, mode, l, linel;
<a name="l00450"></a>00450   <span class="keywordtype">char</span> line[76];
<a name="l00451"></a>00451   <span class="keyword">const</span> <span class="keywordtype">char</span> *n;
<a name="l00452"></a>00452 
<a name="l00453"></a>00453   <a class="code" href="queue_8c.html#ae1a64f63dd8cc46bdb2bcd415aa89e5a">queue_init</a>(&amp;classes);
<a name="l00454"></a>00454   <a class="code" href="queue_8c.html#ae1a64f63dd8cc46bdb2bcd415aa89e5a">queue_init</a>(&amp;pkgs);
<a name="l00455"></a>00455   mode = 0;
<a name="l00456"></a>00456   <a class="code" href="transaction_8c.html#a0aaba93d9c1458f90d9b1bd9c2fb5ecc">transaction_classify</a>(trans, mode, &amp;classes);
<a name="l00457"></a>00457   <span class="keywordflow">for</span> (i = 0; i &lt; classes.<a class="code" href="struct__Queue.html#abb0696a77174cd23b5f488ad4c7b45d2">count</a>; i += 4)
<a name="l00458"></a>00458     {
<a name="l00459"></a>00459       <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <span class="keyword">class </span>= classes.elements[i];
<a name="l00460"></a>00460       <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> cnt = classes.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i + 1];
<a name="l00461"></a>00461       <span class="keywordflow">switch</span>(<span class="keyword">class</span>)
<a name="l00462"></a>00462         {
<a name="l00463"></a>00463         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#a6628972c54e3ec89ee96acb65b435642">SOLVER_TRANSACTION_ERASE</a>:
<a name="l00464"></a>00464           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;%d erased packages:\n&quot;</span>, cnt);
<a name="l00465"></a>00465           <span class="keywordflow">break</span>;
<a name="l00466"></a>00466         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#abb82d7761ad043a7a1082477101fd750">SOLVER_TRANSACTION_INSTALL</a>:
<a name="l00467"></a>00467           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;%d installed packages:\n&quot;</span>, cnt);
<a name="l00468"></a>00468           <span class="keywordflow">break</span>;
<a name="l00469"></a>00469         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#a1c42bf40474df2d9dde92c10e58f9d0d">SOLVER_TRANSACTION_REINSTALLED</a>:
<a name="l00470"></a>00470           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;%d reinstalled packages:\n&quot;</span>, cnt);
<a name="l00471"></a>00471           <span class="keywordflow">break</span>;
<a name="l00472"></a>00472         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#af592c976b1b662d80a5a69a7f4a5d3f8">SOLVER_TRANSACTION_DOWNGRADED</a>:
<a name="l00473"></a>00473           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;%d downgraded packages:\n&quot;</span>, cnt);
<a name="l00474"></a>00474           <span class="keywordflow">break</span>;
<a name="l00475"></a>00475         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#a8ca5f008e0ccc18a47dd9747a0985ea4">SOLVER_TRANSACTION_CHANGED</a>:
<a name="l00476"></a>00476           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;%d changed packages:\n&quot;</span>, cnt);
<a name="l00477"></a>00477           <span class="keywordflow">break</span>;
<a name="l00478"></a>00478         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#a9419edecb82b1de19cb224eb39844296">SOLVER_TRANSACTION_UPGRADED</a>:
<a name="l00479"></a>00479           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;%d upgraded packages:\n&quot;</span>, cnt);
<a name="l00480"></a>00480           <span class="keywordflow">break</span>;
<a name="l00481"></a>00481         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#a308c790355fdf1537b6f63567609ad42">SOLVER_TRANSACTION_VENDORCHANGE</a>:
<a name="l00482"></a>00482           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;%d vendor changes from &#39;%s&#39; to &#39;%s&#39;:\n&quot;</span>, cnt, <a class="code" href="solverdebug_8c.html#aadc9fea47ffbdef009f12e766f09438a">id2strnone</a>(pool, classes.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i + 2]), <a class="code" href="solverdebug_8c.html#aadc9fea47ffbdef009f12e766f09438a">id2strnone</a>(pool, classes.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i + 3]));
<a name="l00483"></a>00483           <span class="keywordflow">break</span>;
<a name="l00484"></a>00484         <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#a54bc6736d4cc1b026b7d31182a29e1d2">SOLVER_TRANSACTION_ARCHCHANGE</a>:
<a name="l00485"></a>00485           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;%d arch changes from %s to %s:\n&quot;</span>, cnt, <a class="code" href="poolid_8c.html#a8a844727bd2258ef240555fc629b2fa7">id2str</a>(pool, classes.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i + 2]), <a class="code" href="poolid_8c.html#a8a844727bd2258ef240555fc629b2fa7">id2str</a>(pool, classes.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i + 3]));
<a name="l00486"></a>00486           <span class="keywordflow">break</span>;
<a name="l00487"></a>00487         <span class="keywordflow">default</span>:
<a name="l00488"></a>00488           <span class="keyword">class </span>= <a class="code" href="transaction_8h.html#a93382c70e0d7d65efea1c2fb4e7babca">SOLVER_TRANSACTION_IGNORE</a>;
<a name="l00489"></a>00489           <span class="keywordflow">break</span>;
<a name="l00490"></a>00490         }
<a name="l00491"></a>00491       <span class="keywordflow">if</span> (<span class="keyword">class</span> == <a class="code" href="transaction_8h.html#a93382c70e0d7d65efea1c2fb4e7babca">SOLVER_TRANSACTION_IGNORE</a>)
<a name="l00492"></a>00492         <span class="keywordflow">continue</span>;
<a name="l00493"></a>00493       <a class="code" href="transaction_8c.html#aec81264647a48cf0cb218d9ee050c068">transaction_classify_pkgs</a>(trans, mode, <span class="keyword">class</span>, classes.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i + 2], classes.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i + 3], &amp;pkgs);
<a name="l00494"></a>00494       *line = 0;
<a name="l00495"></a>00495       linel = 0;
<a name="l00496"></a>00496       <span class="keywordflow">for</span> (j = 0; j &lt; pkgs.<a class="code" href="struct__Queue.html#abb0696a77174cd23b5f488ad4c7b45d2">count</a>; j++)
<a name="l00497"></a>00497         {
<a name="l00498"></a>00498           <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> p = pkgs.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[j];
<a name="l00499"></a>00499           <a class="code" href="struct__Solvable.html">Solvable</a> *s = pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a> + p;
<a name="l00500"></a>00500           <a class="code" href="struct__Solvable.html">Solvable</a> *s2;
<a name="l00501"></a>00501 
<a name="l00502"></a>00502           <span class="keywordflow">switch</span>(<span class="keyword">class</span>)
<a name="l00503"></a>00503             {
<a name="l00504"></a>00504             <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#af592c976b1b662d80a5a69a7f4a5d3f8">SOLVER_TRANSACTION_DOWNGRADED</a>:
<a name="l00505"></a>00505             <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#a9419edecb82b1de19cb224eb39844296">SOLVER_TRANSACTION_UPGRADED</a>:
<a name="l00506"></a>00506               s2 = pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a> + <a class="code" href="transaction_8c.html#afc85427a4fc858b5e2e60fbfe75f8184">transaction_obs_pkg</a>(trans, p);
<a name="l00507"></a>00507               <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - %s -&gt; %s\n&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s), <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s2));
<a name="l00508"></a>00508               <span class="keywordflow">break</span>;
<a name="l00509"></a>00509             <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#a308c790355fdf1537b6f63567609ad42">SOLVER_TRANSACTION_VENDORCHANGE</a>:
<a name="l00510"></a>00510             <span class="keywordflow">case</span> <a class="code" href="transaction_8h.html#a54bc6736d4cc1b026b7d31182a29e1d2">SOLVER_TRANSACTION_ARCHCHANGE</a>:
<a name="l00511"></a>00511               n = <a class="code" href="poolid_8c.html#a8a844727bd2258ef240555fc629b2fa7">id2str</a>(pool, s-&gt;<a class="code" href="struct__Solvable.html#a5912021e2c3fe505c24a92aa7639dff2">name</a>);
<a name="l00512"></a>00512               l = strlen(n);
<a name="l00513"></a>00513               <span class="keywordflow">if</span> (l + linel &gt; <span class="keyword">sizeof</span>(line) - 3)
<a name="l00514"></a>00514                 {
<a name="l00515"></a>00515                   <span class="keywordflow">if</span> (*line)
<a name="l00516"></a>00516                     <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;    %s\n&quot;</span>, line);
<a name="l00517"></a>00517                   *line = 0;
<a name="l00518"></a>00518                   linel = 0;
<a name="l00519"></a>00519                 }
<a name="l00520"></a>00520               <span class="keywordflow">if</span> (l + linel &gt; <span class="keyword">sizeof</span>(line) - 3)
<a name="l00521"></a>00521                 <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;    %s\n&quot;</span>, n);
<a name="l00522"></a>00522               <span class="keywordflow">else</span>
<a name="l00523"></a>00523                 {
<a name="l00524"></a>00524                   <span class="keywordflow">if</span> (*line)
<a name="l00525"></a>00525                     {
<a name="l00526"></a>00526                       strcpy(line + linel, <span class="stringliteral">&quot;, &quot;</span>);
<a name="l00527"></a>00527                       linel += 2;
<a name="l00528"></a>00528                     }
<a name="l00529"></a>00529                   strcpy(line + linel, n);
<a name="l00530"></a>00530                   linel += l;
<a name="l00531"></a>00531                 }
<a name="l00532"></a>00532               <span class="keywordflow">break</span>;
<a name="l00533"></a>00533             <span class="keywordflow">default</span>:
<a name="l00534"></a>00534               <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - %s\n&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00535"></a>00535               <span class="keywordflow">break</span>;
<a name="l00536"></a>00536             }
<a name="l00537"></a>00537         }
<a name="l00538"></a>00538       <span class="keywordflow">if</span> (*line)
<a name="l00539"></a>00539         <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;    %s\n&quot;</span>, line);
<a name="l00540"></a>00540       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00541"></a>00541     }
<a name="l00542"></a>00542   <a class="code" href="queue_8c.html#a701c81a9f7d503837e74d43981e79137">queue_free</a>(&amp;classes);
<a name="l00543"></a>00543   <a class="code" href="queue_8c.html#a701c81a9f7d503837e74d43981e79137">queue_free</a>(&amp;pkgs);
<a name="l00544"></a>00544 }
<a name="l00545"></a>00545 
<a name="l00546"></a>00546 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00547"></a><a class="code" href="solverdebug_8c.html#a4ea8e8de7e1ed600da017692d53670cc">00547</a> <a class="code" href="solverdebug_8c.html#a4ea8e8de7e1ed600da017692d53670cc">solver_printproblemruleinfo</a>(<a class="code" href="struct__Solver.html">Solver</a> *solv, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> probr)
<a name="l00548"></a>00548 {
<a name="l00549"></a>00549   <a class="code" href="struct__Pool.html">Pool</a> *pool = solv-&gt;<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a>;
<a name="l00550"></a>00550   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> dep, source, target;
<a name="l00551"></a>00551 
<a name="l00552"></a>00552   <span class="keywordflow">switch</span> (<a class="code" href="rules_8c.html#aad53b00956958fbffabaa6fece21cbfb">solver_ruleinfo</a>(solv, probr, &amp;source, &amp;target, &amp;dep))
<a name="l00553"></a>00553     {
<a name="l00554"></a>00554     <span class="keywordflow">case</span> <a class="code" href="rules_8h.html#a017ca899ac1b93c098aa31a19ec3e7f3a55d4f2e24454c6bf7a3fb8d6a773fba8">SOLVER_RULE_DISTUPGRADE</a>:
<a name="l00555"></a>00555       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;%s does not belong to a distupgrade repository\n&quot;</span>, <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, source));
<a name="l00556"></a>00556       <span class="keywordflow">return</span>;
<a name="l00557"></a>00557     <span class="keywordflow">case</span> <a class="code" href="rules_8h.html#a017ca899ac1b93c098aa31a19ec3e7f3a9ee824ba216b4dabad9f14064cde2d5d">SOLVER_RULE_INFARCH</a>:
<a name="l00558"></a>00558       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;%s has inferior architecture\n&quot;</span>, <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, source));
<a name="l00559"></a>00559       <span class="keywordflow">return</span>;
<a name="l00560"></a>00560     <span class="keywordflow">case</span> <a class="code" href="rules_8h.html#a017ca899ac1b93c098aa31a19ec3e7f3a426ed89bcc12ecbba0ead66b06416790">SOLVER_RULE_UPDATE</a>:
<a name="l00561"></a>00561       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;problem with installed package %s\n&quot;</span>, <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, source));
<a name="l00562"></a>00562       <span class="keywordflow">return</span>;
<a name="l00563"></a>00563     <span class="keywordflow">case</span> <a class="code" href="rules_8h.html#a017ca899ac1b93c098aa31a19ec3e7f3a0f4c9aaf75b85f0e8fe998e91adb93d7">SOLVER_RULE_JOB</a>:
<a name="l00564"></a>00564       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;conflicting requests\n&quot;</span>);
<a name="l00565"></a>00565       <span class="keywordflow">return</span>;
<a name="l00566"></a>00566     <span class="keywordflow">case</span> <a class="code" href="rules_8h.html#a017ca899ac1b93c098aa31a19ec3e7f3a06845d2149ff68a0662d59611a1b8ebe">SOLVER_RULE_JOB_NOTHING_PROVIDES_DEP</a>:
<a name="l00567"></a>00567       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;nothing provides requested %s\n&quot;</span>, <a class="code" href="poolid_8c.html#afbc7881d0aa3961818b1cc5e00c5a080">dep2str</a>(pool, dep));
<a name="l00568"></a>00568       <span class="keywordflow">return</span>;
<a name="l00569"></a>00569     <span class="keywordflow">case</span> <a class="code" href="rules_8h.html#a017ca899ac1b93c098aa31a19ec3e7f3a50ff87d98eb237ffeb987e9977642d50">SOLVER_RULE_RPM</a>:
<a name="l00570"></a>00570       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;some dependency problem\n&quot;</span>);
<a name="l00571"></a>00571       <span class="keywordflow">return</span>;
<a name="l00572"></a>00572     <span class="keywordflow">case</span> <a class="code" href="rules_8h.html#a017ca899ac1b93c098aa31a19ec3e7f3a21b4f1b4b636f391d2dac35992f34a29">SOLVER_RULE_RPM_NOT_INSTALLABLE</a>:
<a name="l00573"></a>00573       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;package %s is not installable\n&quot;</span>, <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, source));
<a name="l00574"></a>00574       <span class="keywordflow">return</span>;
<a name="l00575"></a>00575     <span class="keywordflow">case</span> <a class="code" href="rules_8h.html#a017ca899ac1b93c098aa31a19ec3e7f3a778fe185601470adfa4a59c0eb7b3b29">SOLVER_RULE_RPM_NOTHING_PROVIDES_DEP</a>:
<a name="l00576"></a>00576       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;nothing provides %s needed by %s\n&quot;</span>, <a class="code" href="poolid_8c.html#afbc7881d0aa3961818b1cc5e00c5a080">dep2str</a>(pool, dep), <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, source));
<a name="l00577"></a>00577       <span class="keywordflow">return</span>;
<a name="l00578"></a>00578     <span class="keywordflow">case</span> <a class="code" href="rules_8h.html#a017ca899ac1b93c098aa31a19ec3e7f3a23f408e1a63fa7a7d8fb52ec9e77beb4">SOLVER_RULE_RPM_SAME_NAME</a>:
<a name="l00579"></a>00579       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;cannot install both %s and %s\n&quot;</span>, <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, source), <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, target));
<a name="l00580"></a>00580       <span class="keywordflow">return</span>;
<a name="l00581"></a>00581     <span class="keywordflow">case</span> <a class="code" href="rules_8h.html#a017ca899ac1b93c098aa31a19ec3e7f3a90ded64b42c18318aa36752fb5ff498d">SOLVER_RULE_RPM_PACKAGE_CONFLICT</a>:
<a name="l00582"></a>00582       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;package %s conflicts with %s provided by %s\n&quot;</span>, <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, source), <a class="code" href="poolid_8c.html#afbc7881d0aa3961818b1cc5e00c5a080">dep2str</a>(pool, dep), <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, target));
<a name="l00583"></a>00583       <span class="keywordflow">return</span>;
<a name="l00584"></a>00584     <span class="keywordflow">case</span> <a class="code" href="rules_8h.html#a017ca899ac1b93c098aa31a19ec3e7f3aaca95ef5ddfaa47cccdf8c220729f812">SOLVER_RULE_RPM_PACKAGE_OBSOLETES</a>:
<a name="l00585"></a>00585       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;package %s obsoletes %s provided by %s\n&quot;</span>, <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, source), <a class="code" href="poolid_8c.html#afbc7881d0aa3961818b1cc5e00c5a080">dep2str</a>(pool, dep), <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, target));
<a name="l00586"></a>00586       <span class="keywordflow">return</span>;
<a name="l00587"></a>00587     <span class="keywordflow">case</span> <a class="code" href="rules_8h.html#a017ca899ac1b93c098aa31a19ec3e7f3a7c91bfef5cb113a68a65a9511c045d8d">SOLVER_RULE_RPM_INSTALLEDPKG_OBSOLETES</a>:
<a name="l00588"></a>00588       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;installed package %s obsoletes %s provided by %s\n&quot;</span>, <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, source), <a class="code" href="poolid_8c.html#afbc7881d0aa3961818b1cc5e00c5a080">dep2str</a>(pool, dep), <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, target));
<a name="l00589"></a>00589       <span class="keywordflow">return</span>;
<a name="l00590"></a>00590     <span class="keywordflow">case</span> <a class="code" href="rules_8h.html#a017ca899ac1b93c098aa31a19ec3e7f3ac0560e16fdd7ed4b68b9a23d534ed1ea">SOLVER_RULE_RPM_IMPLICIT_OBSOLETES</a>:
<a name="l00591"></a>00591       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;package %s implicitely obsoletes %s provided by %s\n&quot;</span>, <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, source), <a class="code" href="poolid_8c.html#afbc7881d0aa3961818b1cc5e00c5a080">dep2str</a>(pool, dep), <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, target));
<a name="l00592"></a>00592       <span class="keywordflow">return</span>;
<a name="l00593"></a>00593     <span class="keywordflow">case</span> <a class="code" href="rules_8h.html#a017ca899ac1b93c098aa31a19ec3e7f3a3966a7bc480988d2018144656a7f1ff6">SOLVER_RULE_RPM_PACKAGE_REQUIRES</a>:
<a name="l00594"></a>00594       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;package %s requires %s, but none of the providers can be installed\n&quot;</span>, <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, source), <a class="code" href="poolid_8c.html#afbc7881d0aa3961818b1cc5e00c5a080">dep2str</a>(pool, dep));
<a name="l00595"></a>00595       <span class="keywordflow">return</span>;
<a name="l00596"></a>00596     <span class="keywordflow">case</span> <a class="code" href="rules_8h.html#a017ca899ac1b93c098aa31a19ec3e7f3a5f13abbc95dc056f26c1f0b3e9c4ad5f">SOLVER_RULE_RPM_SELF_CONFLICT</a>:
<a name="l00597"></a>00597       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;package %s conflicts with %s provided by itself\n&quot;</span>, <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, source), <a class="code" href="poolid_8c.html#afbc7881d0aa3961818b1cc5e00c5a080">dep2str</a>(pool, dep));
<a name="l00598"></a>00598       <span class="keywordflow">return</span>;
<a name="l00599"></a>00599     <span class="keywordflow">case</span> <a class="code" href="rules_8h.html#a017ca899ac1b93c098aa31a19ec3e7f3adeefa7ea94421e355a04428148a565cd">SOLVER_RULE_UNKNOWN</a>:
<a name="l00600"></a>00600     <span class="keywordflow">case</span> <a class="code" href="rules_8h.html#a017ca899ac1b93c098aa31a19ec3e7f3a97cd5bc98562440a27049ab3e9f057c9">SOLVER_RULE_FEATURE</a>:
<a name="l00601"></a>00601     <span class="keywordflow">case</span> <a class="code" href="rules_8h.html#a017ca899ac1b93c098aa31a19ec3e7f3ab8b399ee31c609c11620b6bf428483fc">SOLVER_RULE_LEARNT</a>:
<a name="l00602"></a>00602     <span class="keywordflow">case</span> <a class="code" href="rules_8h.html#a017ca899ac1b93c098aa31a19ec3e7f3addcecc3d22c38ba8581c3179b36af304">SOLVER_RULE_CHOICE</a>:
<a name="l00603"></a>00603       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;bad rule type\n&quot;</span>);
<a name="l00604"></a>00604       <span class="keywordflow">return</span>;
<a name="l00605"></a>00605     }
<a name="l00606"></a>00606 }
<a name="l00607"></a>00607 
<a name="l00608"></a>00608 <span class="keywordtype">void</span>
<a name="l00609"></a><a class="code" href="solverdebug_8h.html#acbc1788262ac60f9cf8388d6d72e35e4">00609</a> <a class="code" href="solverdebug_8c.html#acbc1788262ac60f9cf8388d6d72e35e4">solver_printprobleminfo</a>(<a class="code" href="struct__Solver.html">Solver</a> *solv, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> problem)
<a name="l00610"></a>00610 {
<a name="l00611"></a>00611   <a class="code" href="solverdebug_8c.html#a4ea8e8de7e1ed600da017692d53670cc">solver_printproblemruleinfo</a>(solv, <a class="code" href="problems_8c.html#a3c8706a227dcbb9fd6827ec0130196d8">solver_findproblemrule</a>(solv, problem));
<a name="l00612"></a>00612 }
<a name="l00613"></a>00613 
<a name="l00614"></a>00614 <span class="keywordtype">void</span>
<a name="l00615"></a><a class="code" href="solverdebug_8h.html#afd625dabb1b4f5a75a657d743570d154">00615</a> <a class="code" href="solverdebug_8c.html#afd625dabb1b4f5a75a657d743570d154">solver_printcompleteprobleminfo</a>(<a class="code" href="struct__Solver.html">Solver</a> *solv, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> problem)
<a name="l00616"></a>00616 {
<a name="l00617"></a>00617   <a class="code" href="struct__Queue.html">Queue</a> q;
<a name="l00618"></a>00618   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> probr;
<a name="l00619"></a>00619   <span class="keywordtype">int</span> i, nobad = 0;
<a name="l00620"></a>00620 
<a name="l00621"></a>00621   <a class="code" href="queue_8c.html#ae1a64f63dd8cc46bdb2bcd415aa89e5a">queue_init</a>(&amp;q);
<a name="l00622"></a>00622   <a class="code" href="problems_8c.html#aca0a926f83d774737fd6aaf71609aa9d">solver_findallproblemrules</a>(solv, problem, &amp;q);
<a name="l00623"></a>00623   <span class="keywordflow">for</span> (i = 0; i &lt; q.<a class="code" href="struct__Queue.html#abb0696a77174cd23b5f488ad4c7b45d2">count</a>; i++)
<a name="l00624"></a>00624     {
<a name="l00625"></a>00625       probr = q.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i];
<a name="l00626"></a>00626       <span class="keywordflow">if</span> (!(probr &gt;= solv-&gt;<a class="code" href="struct__Solver.html#a8556e5d1eb46912e7890ec154f12f526">updaterules</a> &amp;&amp; probr &lt; solv-&gt;updaterules_end) &amp;&amp; !(probr &gt;= solv-&gt;<a class="code" href="struct__Solver.html#a8de76bf18047b3259f5350b541f22800">jobrules</a> &amp;&amp; probr &lt; solv-&gt;jobrules_end))
<a name="l00627"></a>00627         {
<a name="l00628"></a>00628           nobad = 1;
<a name="l00629"></a>00629           <span class="keywordflow">break</span>;
<a name="l00630"></a>00630         }
<a name="l00631"></a>00631     }
<a name="l00632"></a>00632   <span class="keywordflow">for</span> (i = 0; i &lt; q.<a class="code" href="struct__Queue.html#abb0696a77174cd23b5f488ad4c7b45d2">count</a>; i++)
<a name="l00633"></a>00633     {
<a name="l00634"></a>00634       probr = q.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i];
<a name="l00635"></a>00635       <span class="keywordflow">if</span> (nobad &amp;&amp; ((probr &gt;= solv-&gt;<a class="code" href="struct__Solver.html#a8556e5d1eb46912e7890ec154f12f526">updaterules</a> &amp;&amp; probr &lt; solv-&gt;updaterules_end) || (probr &gt;= solv-&gt;<a class="code" href="struct__Solver.html#a8de76bf18047b3259f5350b541f22800">jobrules</a> &amp;&amp; probr &lt; solv-&gt;jobrules_end)))
<a name="l00636"></a>00636         <span class="keywordflow">continue</span>;
<a name="l00637"></a>00637       <a class="code" href="solverdebug_8c.html#a4ea8e8de7e1ed600da017692d53670cc">solver_printproblemruleinfo</a>(solv, probr);
<a name="l00638"></a>00638     }
<a name="l00639"></a>00639   <a class="code" href="queue_8c.html#a701c81a9f7d503837e74d43981e79137">queue_free</a>(&amp;q);
<a name="l00640"></a>00640 }
<a name="l00641"></a>00641 
<a name="l00642"></a>00642 <span class="keywordtype">void</span>
<a name="l00643"></a><a class="code" href="solverdebug_8h.html#a092c0f9d18eb795e983c86651a0a169a">00643</a> <a class="code" href="solverdebug_8c.html#a092c0f9d18eb795e983c86651a0a169a">solver_printsolution</a>(<a class="code" href="struct__Solver.html">Solver</a> *solv, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> problem, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> solution)
<a name="l00644"></a>00644 {
<a name="l00645"></a>00645   <a class="code" href="struct__Pool.html">Pool</a> *pool = solv-&gt;<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a>;
<a name="l00646"></a>00646   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> p, rp, element, how, what, select;
<a name="l00647"></a>00647   <a class="code" href="struct__Solvable.html">Solvable</a> *s, *sd;
<a name="l00648"></a>00648 
<a name="l00649"></a>00649   element = 0;
<a name="l00650"></a>00650   <span class="keywordflow">while</span> ((element = <a class="code" href="problems_8c.html#a08c8f5aa6f8c7c338a8974c749f637e6">solver_next_solutionelement</a>(solv, problem, solution, element, &amp;p, &amp;rp)) != 0)
<a name="l00651"></a>00651     {
<a name="l00652"></a>00652       <span class="keywordflow">if</span> (p == <a class="code" href="problems_8h.html#a887758b5642a65f66c6a84ae90ec94a9">SOLVER_SOLUTION_JOB</a>)
<a name="l00653"></a>00653         {
<a name="l00654"></a>00654           <span class="comment">/* job, rp is index into job queue */</span>
<a name="l00655"></a>00655           how = solv-&gt;<a class="code" href="struct__Solver.html#a435112243fdfe7e14ceea9348578d5bd">job</a>.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[rp - 1];
<a name="l00656"></a>00656           what = solv-&gt;<a class="code" href="struct__Solver.html#a435112243fdfe7e14ceea9348578d5bd">job</a>.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[rp];
<a name="l00657"></a>00657           select = how &amp; SOLVER_SELECTMASK;
<a name="l00658"></a>00658           <span class="keywordflow">switch</span> (how &amp; <a class="code" href="solver_8h.html#a429b83154a9bd41060841f3e86e13076">SOLVER_JOBMASK</a>)
<a name="l00659"></a>00659             {
<a name="l00660"></a>00660             <span class="keywordflow">case</span> <a class="code" href="solver_8h.html#a1824d0748e0b4ad4edb5907ad98a0501">SOLVER_INSTALL</a>:
<a name="l00661"></a>00661               <span class="keywordflow">if</span> (select == <a class="code" href="solver_8h.html#a9b518d6f0de09ed95730f921a9b44ec4">SOLVER_SOLVABLE</a> &amp;&amp; solv-&gt;<a class="code" href="struct__Solver.html#a7e7a99dd14a73a3f38f17e24381c50c3">installed</a> &amp;&amp; pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a>[what].<a class="code" href="struct__Solvable.html#a15e0b77fe061c6429a24215191b10f05">repo</a> == solv-&gt;<a class="code" href="struct__Solver.html#a7e7a99dd14a73a3f38f17e24381c50c3">installed</a>)
<a name="l00662"></a>00662                 <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - do not keep %s installed\n&quot;</span>, <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, what));
<a name="l00663"></a>00663               <span class="keywordflow">else</span> <span class="keywordflow">if</span> (select == <a class="code" href="solver_8h.html#a7549896da2123fc3f9f599fbe46958bf">SOLVER_SOLVABLE_PROVIDES</a>)
<a name="l00664"></a>00664                 <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - do not install a solvable %s\n&quot;</span>, <a class="code" href="solverdebug_8c.html#a98abc0451452f9db279e7f3a8b7efecf">solver_select2str</a>(pool, select, what));
<a name="l00665"></a>00665               <span class="keywordflow">else</span>
<a name="l00666"></a>00666                 <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - do not install %s\n&quot;</span>, <a class="code" href="solverdebug_8c.html#a98abc0451452f9db279e7f3a8b7efecf">solver_select2str</a>(pool, select, what));
<a name="l00667"></a>00667               <span class="keywordflow">break</span>;
<a name="l00668"></a>00668             <span class="keywordflow">case</span> <a class="code" href="solver_8h.html#afa4fdabf3f6b7eb6f916d6a9f4389472">SOLVER_ERASE</a>:
<a name="l00669"></a>00669               <span class="keywordflow">if</span> (select == <a class="code" href="solver_8h.html#a9b518d6f0de09ed95730f921a9b44ec4">SOLVER_SOLVABLE</a> &amp;&amp; !(solv-&gt;<a class="code" href="struct__Solver.html#a7e7a99dd14a73a3f38f17e24381c50c3">installed</a> &amp;&amp; pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a>[what].<a class="code" href="struct__Solvable.html#a15e0b77fe061c6429a24215191b10f05">repo</a> == solv-&gt;<a class="code" href="struct__Solver.html#a7e7a99dd14a73a3f38f17e24381c50c3">installed</a>))
<a name="l00670"></a>00670                 <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - do not forbid installation of %s\n&quot;</span>, <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, what));
<a name="l00671"></a>00671               <span class="keywordflow">else</span> <span class="keywordflow">if</span> (select == <a class="code" href="solver_8h.html#a7549896da2123fc3f9f599fbe46958bf">SOLVER_SOLVABLE_PROVIDES</a>)
<a name="l00672"></a>00672                 <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - do not deinstall all solvables %s\n&quot;</span>, <a class="code" href="solverdebug_8c.html#a98abc0451452f9db279e7f3a8b7efecf">solver_select2str</a>(pool, select, what));
<a name="l00673"></a>00673               <span class="keywordflow">else</span>
<a name="l00674"></a>00674                 <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - do not deinstall %s\n&quot;</span>, <a class="code" href="solverdebug_8c.html#a98abc0451452f9db279e7f3a8b7efecf">solver_select2str</a>(pool, select, what));
<a name="l00675"></a>00675               <span class="keywordflow">break</span>;
<a name="l00676"></a>00676             <span class="keywordflow">case</span> <a class="code" href="solver_8h.html#a59d47036c69e7c1a21b2f1940766429c">SOLVER_UPDATE</a>:
<a name="l00677"></a>00677               <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - do not install most recent version of %s\n&quot;</span>, <a class="code" href="solverdebug_8c.html#a98abc0451452f9db279e7f3a8b7efecf">solver_select2str</a>(pool, select, what));
<a name="l00678"></a>00678               <span class="keywordflow">break</span>;
<a name="l00679"></a>00679             <span class="keywordflow">case</span> <a class="code" href="solver_8h.html#ac8cab64c33571685db1c3a885be755e7">SOLVER_LOCK</a>:
<a name="l00680"></a>00680               <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - do not lock %s\n&quot;</span>, <a class="code" href="solverdebug_8c.html#a98abc0451452f9db279e7f3a8b7efecf">solver_select2str</a>(pool, select, what));
<a name="l00681"></a>00681               <span class="keywordflow">break</span>;
<a name="l00682"></a>00682             <span class="keywordflow">default</span>:
<a name="l00683"></a>00683               <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - do something different\n&quot;</span>);
<a name="l00684"></a>00684               <span class="keywordflow">break</span>;
<a name="l00685"></a>00685             }
<a name="l00686"></a>00686         }
<a name="l00687"></a>00687       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p == <a class="code" href="problems_8h.html#ae40fcd11e127cf3ff8cc02bdb817070d">SOLVER_SOLUTION_INFARCH</a>)
<a name="l00688"></a>00688         {
<a name="l00689"></a>00689           s = pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a> + rp;
<a name="l00690"></a>00690           <span class="keywordflow">if</span> (solv-&gt;<a class="code" href="struct__Solver.html#a7e7a99dd14a73a3f38f17e24381c50c3">installed</a> &amp;&amp; s-&gt;<a class="code" href="struct__Solvable.html#a15e0b77fe061c6429a24215191b10f05">repo</a> == solv-&gt;<a class="code" href="struct__Solver.html#a7e7a99dd14a73a3f38f17e24381c50c3">installed</a>)
<a name="l00691"></a>00691             <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - keep %s despite the inferior architecture\n&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00692"></a>00692           <span class="keywordflow">else</span>
<a name="l00693"></a>00693             <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - install %s despite the inferior architecture\n&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00694"></a>00694         }
<a name="l00695"></a>00695       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p == <a class="code" href="problems_8h.html#a7faf739159c14a711cdde6ee64afdb20">SOLVER_SOLUTION_DISTUPGRADE</a>)
<a name="l00696"></a>00696         {
<a name="l00697"></a>00697           s = pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a> + rp;
<a name="l00698"></a>00698           <span class="keywordflow">if</span> (solv-&gt;<a class="code" href="struct__Solver.html#a7e7a99dd14a73a3f38f17e24381c50c3">installed</a> &amp;&amp; s-&gt;<a class="code" href="struct__Solvable.html#a15e0b77fe061c6429a24215191b10f05">repo</a> == solv-&gt;<a class="code" href="struct__Solver.html#a7e7a99dd14a73a3f38f17e24381c50c3">installed</a>)
<a name="l00699"></a>00699             <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - keep obsolete %s\n&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00700"></a>00700           <span class="keywordflow">else</span>
<a name="l00701"></a>00701             <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - install %s from excluded repository\n&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00702"></a>00702         }
<a name="l00703"></a>00703       <span class="keywordflow">else</span>
<a name="l00704"></a>00704         {
<a name="l00705"></a>00705           <span class="comment">/* policy, replace p with rp */</span>
<a name="l00706"></a>00706           s = pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a> + p;
<a name="l00707"></a>00707           sd = rp ? pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a> + rp : 0;
<a name="l00708"></a>00708           <span class="keywordflow">if</span> (sd)
<a name="l00709"></a>00709             {
<a name="l00710"></a>00710               <span class="keywordtype">int</span> illegal = <a class="code" href="policy_8c.html#a630f6866934a3c1ae09d169f82cd7145">policy_is_illegal</a>(solv, s, sd, 0);
<a name="l00711"></a>00711               <span class="keywordflow">if</span> ((illegal &amp; <a class="code" href="policy_8h.html#ac7b2c8d05a60befa9132e1b709706b6b">POLICY_ILLEGAL_DOWNGRADE</a>) != 0)
<a name="l00712"></a>00712                 <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - allow downgrade of %s to %s\n&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s), <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, sd));
<a name="l00713"></a>00713               <span class="keywordflow">if</span> ((illegal &amp; <a class="code" href="policy_8h.html#a0a7689abd063f1afbd01d3a2a122a9ca">POLICY_ILLEGAL_ARCHCHANGE</a>) != 0)
<a name="l00714"></a>00714                 <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - allow architecture change of %s to %s\n&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s), <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, sd));
<a name="l00715"></a>00715               <span class="keywordflow">if</span> ((illegal &amp; <a class="code" href="policy_8h.html#a373cae9229c22e1d2304b0465f77fd69">POLICY_ILLEGAL_VENDORCHANGE</a>) != 0)
<a name="l00716"></a>00716                 {
<a name="l00717"></a>00717                   <span class="keywordflow">if</span> (sd-&gt;<a class="code" href="struct__Solvable.html#a042e0dd4d730f3b15a0263af25198441">vendor</a>)
<a name="l00718"></a>00718                     <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - allow vendor change from &#39;%s&#39; (%s) to &#39;%s&#39; (%s)\n&quot;</span>, <a class="code" href="poolid_8c.html#a8a844727bd2258ef240555fc629b2fa7">id2str</a>(pool, s-&gt;<a class="code" href="struct__Solvable.html#a042e0dd4d730f3b15a0263af25198441">vendor</a>), <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s), <a class="code" href="poolid_8c.html#a8a844727bd2258ef240555fc629b2fa7">id2str</a>(pool, sd-&gt;<a class="code" href="struct__Solvable.html#a042e0dd4d730f3b15a0263af25198441">vendor</a>), <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, sd));
<a name="l00719"></a>00719                   <span class="keywordflow">else</span>
<a name="l00720"></a>00720                     <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - allow vendor change from &#39;%s&#39; (%s) to no vendor (%s)\n&quot;</span>, <a class="code" href="poolid_8c.html#a8a844727bd2258ef240555fc629b2fa7">id2str</a>(pool, s-&gt;<a class="code" href="struct__Solvable.html#a042e0dd4d730f3b15a0263af25198441">vendor</a>), <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s), <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, sd));
<a name="l00721"></a>00721                 }
<a name="l00722"></a>00722               <span class="keywordflow">if</span> (!illegal)
<a name="l00723"></a>00723                 <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - allow replacement of %s with %s\n&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s), <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, sd));
<a name="l00724"></a>00724             }
<a name="l00725"></a>00725           <span class="keywordflow">else</span>
<a name="l00726"></a>00726             {
<a name="l00727"></a>00727               <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  - allow deinstallation of %s\n&quot;</span>, <a class="code" href="pool_8h.html#ac54bf34d95ae90e0368aaf0662cd0783">solvable2str</a>(pool, s));
<a name="l00728"></a>00728             }
<a name="l00729"></a>00729         }
<a name="l00730"></a>00730     }
<a name="l00731"></a>00731 }
<a name="l00732"></a>00732 
<a name="l00733"></a>00733 <span class="keywordtype">void</span>
<a name="l00734"></a><a class="code" href="solverdebug_8h.html#aa97948e56f4704156c6433820c46bf0a">00734</a> <a class="code" href="solverdebug_8c.html#aa97948e56f4704156c6433820c46bf0a">solver_printallsolutions</a>(<a class="code" href="struct__Solver.html">Solver</a> *solv)
<a name="l00735"></a>00735 {
<a name="l00736"></a>00736   <a class="code" href="struct__Pool.html">Pool</a> *pool = solv-&gt;<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a>;
<a name="l00737"></a>00737   <span class="keywordtype">int</span> pcnt;
<a name="l00738"></a>00738   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> problem, solution;
<a name="l00739"></a>00739 
<a name="l00740"></a>00740   <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;Encountered problems! Here are the solutions:\n\n&quot;</span>);
<a name="l00741"></a>00741   pcnt = 0;
<a name="l00742"></a>00742   problem = 0;
<a name="l00743"></a>00743   <span class="keywordflow">while</span> ((problem = <a class="code" href="problems_8c.html#a27a5e92fb20e0f00175c3070c09e168c">solver_next_problem</a>(solv, problem)) != 0)
<a name="l00744"></a>00744     {
<a name="l00745"></a>00745       pcnt++;
<a name="l00746"></a>00746       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;Problem %d:\n&quot;</span>, pcnt);
<a name="l00747"></a>00747       <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;====================================\n&quot;</span>);
<a name="l00748"></a>00748 <span class="preprocessor">#if 1</span>
<a name="l00749"></a>00749 <span class="preprocessor"></span>      <a class="code" href="solverdebug_8c.html#acbc1788262ac60f9cf8388d6d72e35e4">solver_printprobleminfo</a>(solv, problem);
<a name="l00750"></a>00750 <span class="preprocessor">#else</span>
<a name="l00751"></a>00751 <span class="preprocessor"></span>      <a class="code" href="solverdebug_8c.html#afd625dabb1b4f5a75a657d743570d154">solver_printcompleteprobleminfo</a>(solv, problem);
<a name="l00752"></a>00752 <span class="preprocessor">#endif</span>
<a name="l00753"></a>00753 <span class="preprocessor"></span>      <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00754"></a>00754       solution = 0;
<a name="l00755"></a>00755       <span class="keywordflow">while</span> ((solution = <a class="code" href="problems_8c.html#a522e36ab099a24a8cc17b3169779ecb9">solver_next_solution</a>(solv, problem, solution)) != 0)
<a name="l00756"></a>00756         {
<a name="l00757"></a>00757           <a class="code" href="solverdebug_8c.html#a092c0f9d18eb795e983c86651a0a169a">solver_printsolution</a>(solv, problem, solution);
<a name="l00758"></a>00758           <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00759"></a>00759         }
<a name="l00760"></a>00760     }
<a name="l00761"></a>00761 }
<a name="l00762"></a>00762 
<a name="l00763"></a>00763 <span class="keywordtype">void</span>
<a name="l00764"></a><a class="code" href="solverdebug_8h.html#afee273ce731342d1e9da408c542c8e36">00764</a> <a class="code" href="solverdebug_8c.html#afee273ce731342d1e9da408c542c8e36">solver_printtrivial</a>(<a class="code" href="struct__Solver.html">Solver</a> *solv)
<a name="l00765"></a>00765 {
<a name="l00766"></a>00766   <a class="code" href="struct__Pool.html">Pool</a> *pool = solv-&gt;<a class="code" href="struct__Solver.html#aa5df779fdf9b25650a76796827daf52c">pool</a>;
<a name="l00767"></a>00767   <a class="code" href="struct__Queue.html">Queue</a> in, out;
<a name="l00768"></a>00768   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> p;
<a name="l00769"></a>00769   <span class="keyword">const</span> <span class="keywordtype">char</span> *n; 
<a name="l00770"></a>00770   <a class="code" href="struct__Solvable.html">Solvable</a> *s; 
<a name="l00771"></a>00771   <span class="keywordtype">int</span> i;
<a name="l00772"></a>00772 
<a name="l00773"></a>00773   <a class="code" href="queue_8c.html#ae1a64f63dd8cc46bdb2bcd415aa89e5a">queue_init</a>(&amp;in);
<a name="l00774"></a>00774   <span class="keywordflow">for</span> (p = 1, s = pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a> + p; p &lt; solv-&gt;pool-&gt;<a class="code" href="struct__Pool.html#a00e935f7b65616513799ac9e26fefa31">nsolvables</a>; p++, s++)
<a name="l00775"></a>00775     {   
<a name="l00776"></a>00776       n = <a class="code" href="poolid_8c.html#a8a844727bd2258ef240555fc629b2fa7">id2str</a>(pool, s-&gt;<a class="code" href="struct__Solvable.html#a5912021e2c3fe505c24a92aa7639dff2">name</a>);
<a name="l00777"></a>00777       <span class="keywordflow">if</span> (strncmp(n, <span class="stringliteral">&quot;patch:&quot;</span>, 6) != 0 &amp;&amp; strncmp(n, <span class="stringliteral">&quot;pattern:&quot;</span>, 8) != 0)
<a name="l00778"></a>00778         <span class="keywordflow">continue</span>;
<a name="l00779"></a>00779       <a class="code" href="queue_8h.html#a3ba172138b6a04f289def63b198057f1">queue_push</a>(&amp;in, p); 
<a name="l00780"></a>00780     }   
<a name="l00781"></a>00781   <span class="keywordflow">if</span> (!in.<a class="code" href="struct__Queue.html#abb0696a77174cd23b5f488ad4c7b45d2">count</a>)
<a name="l00782"></a>00782     {
<a name="l00783"></a>00783       <a class="code" href="queue_8c.html#a701c81a9f7d503837e74d43981e79137">queue_free</a>(&amp;in);
<a name="l00784"></a>00784       <span class="keywordflow">return</span>;
<a name="l00785"></a>00785     }
<a name="l00786"></a>00786   <a class="code" href="queue_8c.html#ae1a64f63dd8cc46bdb2bcd415aa89e5a">queue_init</a>(&amp;out);
<a name="l00787"></a>00787   <a class="code" href="solver_8c.html#acc2cc06b09aca2762d15343154b8e8a7">solver_trivial_installable</a>(solv, &amp;in, &amp;out);
<a name="l00788"></a>00788   <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;trivial installable status:\n&quot;</span>);
<a name="l00789"></a>00789   <span class="keywordflow">for</span> (i = 0; i &lt; in.<a class="code" href="struct__Queue.html#abb0696a77174cd23b5f488ad4c7b45d2">count</a>; i++)
<a name="l00790"></a>00790     <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;  %s: %d\n&quot;</span>, <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, in.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i]), out.<a class="code" href="struct__Queue.html#a116eb58bed8ff76bf18f9c16cf1ce5c6">elements</a>[i]);
<a name="l00791"></a>00791   <a class="code" href="pool_8h.html#ac2855e39d8eaea31be68bd0fd03574b5">POOL_DEBUG</a>(<a class="code" href="pool_8h.html#a570981a4b70f26299efdef38a1cebf3e">SAT_DEBUG_RESULT</a>, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00792"></a>00792   <a class="code" href="queue_8c.html#a701c81a9f7d503837e74d43981e79137">queue_free</a>(&amp;in);
<a name="l00793"></a>00793   <a class="code" href="queue_8c.html#a701c81a9f7d503837e74d43981e79137">queue_free</a>(&amp;out);
<a name="l00794"></a>00794 }
<a name="l00795"></a>00795 
<a name="l00796"></a>00796 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00797"></a><a class="code" href="solverdebug_8h.html#a98abc0451452f9db279e7f3a8b7efecf">00797</a> <a class="code" href="solverdebug_8c.html#a98abc0451452f9db279e7f3a8b7efecf">solver_select2str</a>(<a class="code" href="struct__Pool.html">Pool</a> *pool, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> select, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> what)
<a name="l00798"></a>00798 {
<a name="l00799"></a>00799   <span class="keyword">const</span> <span class="keywordtype">char</span> *s;
<a name="l00800"></a>00800   <span class="keywordtype">char</span> *b;
<a name="l00801"></a>00801   <span class="keywordflow">if</span> (select == <a class="code" href="solver_8h.html#a9b518d6f0de09ed95730f921a9b44ec4">SOLVER_SOLVABLE</a>)
<a name="l00802"></a>00802     <span class="keywordflow">return</span> <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, what);
<a name="l00803"></a>00803   <span class="keywordflow">if</span> (select == <a class="code" href="solver_8h.html#a9421d78139a656e271ef26a1e6ec45e9">SOLVER_SOLVABLE_NAME</a>)
<a name="l00804"></a>00804     <span class="keywordflow">return</span> <a class="code" href="poolid_8c.html#afbc7881d0aa3961818b1cc5e00c5a080">dep2str</a>(pool, what);
<a name="l00805"></a>00805   <span class="keywordflow">if</span> (select == <a class="code" href="solver_8h.html#a7549896da2123fc3f9f599fbe46958bf">SOLVER_SOLVABLE_PROVIDES</a>)
<a name="l00806"></a>00806     {
<a name="l00807"></a>00807       s = <a class="code" href="poolid_8c.html#afbc7881d0aa3961818b1cc5e00c5a080">dep2str</a>(pool, what);
<a name="l00808"></a>00808       b = <a class="code" href="pool_8c.html#a52f22722ec60db05e2599adc89b2a099">pool_alloctmpspace</a>(pool, 11 + strlen(s));
<a name="l00809"></a>00809       sprintf(b, <span class="stringliteral">&quot;providing %s&quot;</span>, s);
<a name="l00810"></a>00810       <span class="keywordflow">return</span> b;
<a name="l00811"></a>00811     }
<a name="l00812"></a>00812   <span class="keywordflow">if</span> (select == <a class="code" href="solver_8h.html#a863bf2ecf4f1541a43fe51b1a4e1933d">SOLVER_SOLVABLE_ONE_OF</a>)
<a name="l00813"></a>00813     {
<a name="l00814"></a>00814       <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> p;
<a name="l00815"></a>00815       <span class="keywordtype">char</span> *b2;
<a name="l00816"></a>00816       b = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00817"></a>00817       <span class="keywordflow">while</span> ((p = pool-&gt;<a class="code" href="struct__Pool.html#a0cdb8c9d12440e6e59b7b569259ef493">whatprovidesdata</a>[what++]) != 0)
<a name="l00818"></a>00818         {
<a name="l00819"></a>00819           s = <a class="code" href="pool_8h.html#adf35a6568989887a7ca04422cf6fec98">solvid2str</a>(pool, p);
<a name="l00820"></a>00820           b2 = <a class="code" href="pool_8c.html#a52f22722ec60db05e2599adc89b2a099">pool_alloctmpspace</a>(pool, strlen(b) + strlen(s) + 3);
<a name="l00821"></a>00821           sprintf(b2, <span class="stringliteral">&quot;%s, %s&quot;</span>, b, s);
<a name="l00822"></a>00822           b = b2;
<a name="l00823"></a>00823         }
<a name="l00824"></a>00824       <span class="keywordflow">return</span> *b ? b + 2 : <span class="stringliteral">&quot;nothing&quot;</span>;
<a name="l00825"></a>00825     }
<a name="l00826"></a>00826   <span class="keywordflow">if</span> (select == <a class="code" href="solver_8h.html#a28e916179dc307b3b10a19ae80368a72">SOLVER_SOLVABLE_REPO</a>)
<a name="l00827"></a>00827     {
<a name="l00828"></a>00828       b = <a class="code" href="pool_8c.html#a52f22722ec60db05e2599adc89b2a099">pool_alloctmpspace</a>(pool, 20);
<a name="l00829"></a>00829       sprintf(b, <span class="stringliteral">&quot;repo #%d&quot;</span>, what);
<a name="l00830"></a>00830       <span class="keywordflow">return</span> b;
<a name="l00831"></a>00831     }
<a name="l00832"></a>00832   <span class="keywordflow">if</span> (select == <a class="code" href="solver_8h.html#ae3aad4cf02f4e13ed9675727fd50d610">SOLVER_SOLVABLE_ALL</a>)
<a name="l00833"></a>00833     <span class="keywordflow">return</span> <span class="stringliteral">&quot;all packages&quot;</span>;
<a name="l00834"></a>00834   <span class="keywordflow">return</span> <span class="stringliteral">&quot;unknown job select&quot;</span>;
<a name="l00835"></a>00835 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Sun Oct 17 2010 15:21:23 for satsolver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
