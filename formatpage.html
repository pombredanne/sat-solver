<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>satsolver: Solv file format</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Solv file format </h1>  </div>
</div>
<div class="contents">
<p>Metadata information is stored as '.solv' files</p>
<p>These files have the following format:</p>
<h2><a class="anchor" id="formatv0"></a>
V0 format</h2>
<div class="fragment"><pre class="fragment">  MAGIC: <span class="stringliteral">&#39;SOLV&#39;</span>
  U32:   0
 
  -- sizes --
 
  U32:   NUMID                       <span class="comment">/* number of Ids (names) */</span>
  U32:   NUMREL                      <span class="comment">/* number of RelDeps (dependencies) */</span>
  U32:   NUMSOLV                     <span class="comment">/* number of Solvables (packages) */</span>
  
  -- <span class="keywordtype">string</span> data --
  U32:   SIZEID                      <span class="comment">/* total size of string buffer */</span>
   U8*:   DICT (SIZE SIZEID)         <span class="comment">/* (raw) string buffer */</span>
  
  -- reldep data --
   U8*:   RELDICT                    <span class="comment">/* Buffer for RandDeps (Id,Id,u8) */</span>
 
  -- source data --                  <span class="comment">/* apparently unused */</span>
  
  U32:   NUMSRCDATA
   U8 :   TYPE                        <span class="comment">/* TYPE_ID, TYPE_U32, TYPE_STR */</span>
   ID :   DATAID
   ID | U32 | U8*
  
  -- solvables --
 
  U32:   NUMSOLVDATA
   U8 :   TYPE
   ID :   DATAID
   U32:   NUM/SIZE
  
  U8*: BITS
  U8*: DATA


V6 format
=========

  MAGIC: <span class="stringliteral">&#39;SOLV&#39;</span>
  U32:   6

  U32:   NUMID                       <span class="comment">/* number of Ids (names) */</span>
  U32:   NUMREL                      <span class="comment">/* number of RelDeps (dependencies) */</span>
  U32:   NUMDIR                      <span class="comment">/* number of directories */</span>
  U32:   NUMITEM                     <span class="comment">/* number of items (packages) */</span>
  U32:   NUMKEYS
  U32:   NUMSCHEMATA                 <span class="comment">/* number of schemata */</span>
  U32:   NUMINFO
  U32:   FLAGS                       <span class="comment">/* solv file flags */</span>
                        4:PREFIX_POOL

  -- <span class="keywordtype">string</span> data --
  ID:    SIZEID                      <span class="comment">/* total size of string buffer */</span>
   U8*:  DICT (SIZE SIZEID)          <span class="comment">/* (raw) string buffer */</span>

  -- reldep data --
   U8*:  RELDICT                     <span class="comment">/* Buffer for RandDeps (Id,Id,u8) */</span>

  -- directory data --
   U8*:  DIRDICT                     <span class="comment">/* Buffer for dirs (Id,Id) */</span>

  -- key data --
  NUMKEYS *
    ID: name
    ID: type
    ID: expanded num/size

  -- schemata data --
  ID: expanded schemata size
  NUMSCHEMATA *
    IDARRAY* keys

  -- file information --
  ID maxinfolen  (IF NUMINFO)
  ID allinfolen  (IF NUMINFO)
  NUMINFO *
    ID schema
    U8 *data

  -- item data --
  ID maxitemlen  (IF NUMITEM)
  ID allitemlen  (IF NUMITEM)
  NUMITEM *
    ID schema
    U8* data

  -- paged vertical data --
  U32 pagesize
  NPAGES *
    U32 len * 2 + compressedflag
    U8* data
</pre></div><p>key sizes for storage types:</p>
<div class="fragment"><pre class="fragment"><a class="code" href="repodata_8h.html#a67f01cde1ce42eadda50aadd628a6c8e">KEY_STORAGE_VERTICAL_OFFSET</a>: packed size
<a class="code" href="repodata_8h.html#ab0e8438d08a3f5b23d3d36649f73f0b7">KEY_STORAGE_INCORE</a>: packed size
<a class="code" href="repodata_8h.html#a7fa51f8e521aa65dd27bf42dcd283109">KEY_STORAGE_SOLVABLE</a>: unpacked size
</pre></div> </div>
<hr class="footer"/><address class="footer"><small>Generated on Sun Oct 17 2010 15:21:23 for satsolver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
