<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>satsolver: src/repo.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="dir_4422304925a660d7ad9b44d0ebab103c.html">src</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>repo.h</h1>  </div>
</div>
<div class="contents">
<a href="repo_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) 2007, Novell Inc.</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This program is licensed under the BSD license, read LICENSE.BSD</span>
<a name="l00005"></a>00005 <span class="comment"> * for further information</span>
<a name="l00006"></a>00006 <span class="comment"> */</span>
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="comment">/*</span>
<a name="l00009"></a>00009 <span class="comment"> * repo.h</span>
<a name="l00010"></a>00010 <span class="comment"> * </span>
<a name="l00011"></a>00011 <span class="comment"> */</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="preprocessor">#ifndef SATSOLVER_REPO_H</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span><span class="preprocessor">#define SATSOLVER_REPO_H</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &quot;<a class="code" href="pooltypes_8h.html">pooltypes.h</a>&quot;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &quot;<a class="code" href="pool_8h.html">pool.h</a>&quot;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &quot;<a class="code" href="repodata_8h.html">repodata.h</a>&quot;</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 
<a name="l00022"></a><a class="code" href="struct__Repo.html">00022</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__Repo.html">_Repo</a> {
<a name="l00023"></a><a class="code" href="struct__Repo.html#a2d923710696b0d7b3bdf859aa9d1f895">00023</a>   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="struct__Repo.html#a2d923710696b0d7b3bdf859aa9d1f895">name</a>;             <span class="comment">/* name pointer */</span>
<a name="l00024"></a><a class="code" href="struct__Repo.html#a9d36642e158d91ea7bd2ef2b3179f0b1">00024</a>   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <a class="code" href="struct__Repo.html#a9d36642e158d91ea7bd2ef2b3179f0b1">repoid</a>;                    <span class="comment">/* our id */</span>
<a name="l00025"></a><a class="code" href="struct__Repo.html#a5f0ca9a3cfa8ec56db137e3091062df6">00025</a>   <span class="keywordtype">void</span> *<a class="code" href="struct__Repo.html#a5f0ca9a3cfa8ec56db137e3091062df6">appdata</a>;                <span class="comment">/* application private pointer */</span>
<a name="l00026"></a>00026 
<a name="l00027"></a><a class="code" href="struct__Repo.html#a6bd8127a73ebfe52aa09498f969e0b47">00027</a>   <a class="code" href="struct__Pool.html">Pool</a> *<a class="code" href="struct__Repo.html#a6bd8127a73ebfe52aa09498f969e0b47">pool</a>;                   <span class="comment">/* pool containing this repo */</span>
<a name="l00028"></a>00028 
<a name="l00029"></a><a class="code" href="struct__Repo.html#a4eb2dd93e4a4f88f13d462f2f111e038">00029</a>   <span class="keywordtype">int</span> <a class="code" href="struct__Repo.html#a4eb2dd93e4a4f88f13d462f2f111e038">start</a>;                    <span class="comment">/* start of this repo solvables within pool-&gt;solvables */</span>
<a name="l00030"></a><a class="code" href="struct__Repo.html#aca3e16cc200b9c236963f56bf038a7bc">00030</a>   <span class="keywordtype">int</span> <a class="code" href="struct__Repo.html#aca3e16cc200b9c236963f56bf038a7bc">end</a>;                      <span class="comment">/* last solvable + 1 of this repo */</span>
<a name="l00031"></a><a class="code" href="struct__Repo.html#a71f8addb47dc90a36295f2993e30b24d">00031</a>   <span class="keywordtype">int</span> <a class="code" href="struct__Repo.html#a71f8addb47dc90a36295f2993e30b24d">nsolvables</a>;               <span class="comment">/* number of solvables repo is contributing to pool */</span>
<a name="l00032"></a>00032 
<a name="l00033"></a><a class="code" href="struct__Repo.html#a637e3e83a1a07551b8bf6e73a654083d">00033</a>   <span class="keywordtype">int</span> <a class="code" href="struct__Repo.html#a637e3e83a1a07551b8bf6e73a654083d">disabled</a>;                 <span class="comment">/* ignore the solvables? */</span>
<a name="l00034"></a><a class="code" href="struct__Repo.html#a256071d9e92a293f8a2b5f27f852ac9c">00034</a>   <span class="keywordtype">int</span> <a class="code" href="struct__Repo.html#a256071d9e92a293f8a2b5f27f852ac9c">priority</a>;                 <span class="comment">/* priority of this repo */</span>
<a name="l00035"></a><a class="code" href="struct__Repo.html#aecbc435b750a3055088cd7e155cb79e6">00035</a>   <span class="keywordtype">int</span> <a class="code" href="struct__Repo.html#aecbc435b750a3055088cd7e155cb79e6">subpriority</a>;              <span class="comment">/* sub-priority of this repo, used just for sorting, not pruning */</span>
<a name="l00036"></a>00036 
<a name="l00037"></a><a class="code" href="struct__Repo.html#afddcfa36231cc08266800bee5b978528">00037</a>   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> *<a class="code" href="struct__Repo.html#afddcfa36231cc08266800bee5b978528">idarraydata</a>;              <span class="comment">/* array of metadata Ids, solvable dependencies are offsets into this array */</span>
<a name="l00038"></a><a class="code" href="struct__Repo.html#af36617539c31ba042d4ac8669463a235">00038</a>   <span class="keywordtype">int</span> <a class="code" href="struct__Repo.html#af36617539c31ba042d4ac8669463a235">idarraysize</a>;
<a name="l00039"></a><a class="code" href="struct__Repo.html#acd8628e2290906897879e3ffe666419e">00039</a>   <a class="code" href="pooltypes_8h.html#ac8d1df6975469fe7c63e8a750755200f">Offset</a> <a class="code" href="struct__Repo.html#acd8628e2290906897879e3ffe666419e">lastoff</a>;               <span class="comment">/* start of last array in idarraydata */</span>
<a name="l00040"></a>00040 
<a name="l00041"></a><a class="code" href="struct__Repo.html#ad7b6bcb6cc9da76cbb67e26fc3c22884">00041</a>   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> *<a class="code" href="struct__Repo.html#ad7b6bcb6cc9da76cbb67e26fc3c22884">rpmdbid</a>;                  <span class="comment">/* solvable side data */</span>
<a name="l00042"></a>00042 
<a name="l00043"></a><a class="code" href="struct__Repo.html#a2dfdb93a6ac25e5b52d874f8c2a40ecc">00043</a>   <a class="code" href="struct__Repodata.html">Repodata</a> *<a class="code" href="struct__Repo.html#a2dfdb93a6ac25e5b52d874f8c2a40ecc">repodata</a>;           <span class="comment">/* our stores for non-solvable related data */</span>
<a name="l00044"></a><a class="code" href="struct__Repo.html#af7ed112a6af7d18c3b7ccaed0ddcde23">00044</a>   <span class="keywordtype">unsigned</span> <a class="code" href="struct__Repo.html#af7ed112a6af7d18c3b7ccaed0ddcde23">nrepodata</a>;           <span class="comment">/* number of our stores..  */</span>
<a name="l00045"></a>00045 } <a class="code" href="struct__Repo.html">Repo</a>;
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="keyword">extern</span> <a class="code" href="struct__Repo.html">Repo</a> *<a class="code" href="repo_8c.html#ae5a3b44b83bd16c07c41124432c97c84">repo_create</a>(<a class="code" href="struct__Pool.html">Pool</a> *pool, <span class="keyword">const</span> <span class="keywordtype">char</span> *name);
<a name="l00048"></a>00048 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="repo_8c.html#a411193cbc231a524624214df3be7be50">repo_free</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <span class="keywordtype">int</span> reuseids);
<a name="l00049"></a>00049 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="repo_8c.html#a8b92f36a661ff13a082abcc7356ef732">repo_empty</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <span class="keywordtype">int</span> reuseids);
<a name="l00050"></a>00050 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="repo_8c.html#a89b038702063be8cdd7e0234161b69ce">repo_freeallrepos</a>(<a class="code" href="struct__Pool.html">Pool</a> *pool, <span class="keywordtype">int</span> reuseids);
<a name="l00051"></a>00051 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="repo_8c.html#a4112ba011963906d4fda4cdaf77424ae">repo_free_solvable_block</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> start, <span class="keywordtype">int</span> count, <span class="keywordtype">int</span> reuseids);
<a name="l00052"></a>00052 <span class="keyword">extern</span> <span class="keywordtype">void</span> *<a class="code" href="repo_8c.html#a062abda35f774f9e00d90db8703620fe">repo_sidedata_create</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <span class="keywordtype">size_t</span> size);
<a name="l00053"></a>00053 <span class="keyword">extern</span> <span class="keywordtype">void</span> *<a class="code" href="repo_8c.html#aeb3fa1a54d652d49e0813e7e5c6aa986">repo_sidedata_extend</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <span class="keywordtype">void</span> *b, <span class="keywordtype">size_t</span> size, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> p, <span class="keywordtype">int</span> count);
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 <span class="keyword">extern</span> <a class="code" href="pooltypes_8h.html#ac8d1df6975469fe7c63e8a750755200f">Offset</a> <a class="code" href="repo_8c.html#af548c9bff9ce28a70d7eb2cd4e802fa4">repo_addid</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <a class="code" href="pooltypes_8h.html#ac8d1df6975469fe7c63e8a750755200f">Offset</a> olddeps, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <span class="keywordtype">id</span>);
<a name="l00056"></a>00056 <span class="keyword">extern</span> <a class="code" href="pooltypes_8h.html#ac8d1df6975469fe7c63e8a750755200f">Offset</a> <a class="code" href="repo_8c.html#ad035ce4b23179cd53edc538c834b27bd">repo_addid_dep</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <a class="code" href="pooltypes_8h.html#ac8d1df6975469fe7c63e8a750755200f">Offset</a> olddeps, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <span class="keywordtype">id</span>, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> marker);
<a name="l00057"></a>00057 <span class="keyword">extern</span> <a class="code" href="pooltypes_8h.html#ac8d1df6975469fe7c63e8a750755200f">Offset</a> <a class="code" href="repo_8c.html#a41957b049c7e11ef54de8419a16d55e8">repo_reserve_ids</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <a class="code" href="pooltypes_8h.html#ac8d1df6975469fe7c63e8a750755200f">Offset</a> olddeps, <span class="keywordtype">int</span> num);
<a name="l00058"></a>00058 <span class="keyword">extern</span> <a class="code" href="pooltypes_8h.html#ac8d1df6975469fe7c63e8a750755200f">Offset</a> <a class="code" href="repo_8c.html#af0d08211aae697b2d23cedafd41f3a26">repo_fix_supplements</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <a class="code" href="pooltypes_8h.html#ac8d1df6975469fe7c63e8a750755200f">Offset</a> provides, <a class="code" href="pooltypes_8h.html#ac8d1df6975469fe7c63e8a750755200f">Offset</a> supplements, <a class="code" href="pooltypes_8h.html#ac8d1df6975469fe7c63e8a750755200f">Offset</a> freshens);
<a name="l00059"></a>00059 <span class="keyword">extern</span> <a class="code" href="pooltypes_8h.html#ac8d1df6975469fe7c63e8a750755200f">Offset</a> <a class="code" href="repo_8c.html#a66d404afe28c9da4ae9b65062b280ce0">repo_fix_conflicts</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <a class="code" href="pooltypes_8h.html#ac8d1df6975469fe7c63e8a750755200f">Offset</a> conflicts);
<a name="l00060"></a>00060 
<a name="l00061"></a><a class="code" href="repo_8h.html#a8f8c70ec94a992fdf9db34a189b66d01">00061</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="repo_8h.html#a8f8c70ec94a992fdf9db34a189b66d01">repo_name</a>(<span class="keyword">const</span> <a class="code" href="struct__Repo.html">Repo</a> *repo)
<a name="l00062"></a>00062 {
<a name="l00063"></a>00063   <span class="keywordflow">return</span> repo-&gt;<a class="code" href="struct__Repo.html#a2d923710696b0d7b3bdf859aa9d1f895">name</a>;
<a name="l00064"></a>00064 }
<a name="l00065"></a>00065 
<a name="l00066"></a><a class="code" href="repo_8h.html#a3903f2c0056b12d2f508f2ca0667033e">00066</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <a class="code" href="repo_8h.html#a3903f2c0056b12d2f508f2ca0667033e">repo_add_solvable</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo)
<a name="l00067"></a>00067 {
<a name="l00068"></a>00068   <span class="keyword">extern</span> <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <a class="code" href="pool_8c.html#aa2c820ca3aab78709e094f5b0f31cb5c" title="Solvable management.">pool_add_solvable</a>(<a class="code" href="struct__Pool.html">Pool</a> *pool);
<a name="l00069"></a>00069   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> p = <a class="code" href="pool_8c.html#aa2c820ca3aab78709e094f5b0f31cb5c" title="Solvable management.">pool_add_solvable</a>(repo-&gt;<a class="code" href="struct__Repo.html#a6bd8127a73ebfe52aa09498f969e0b47">pool</a>);
<a name="l00070"></a>00070   <span class="keywordflow">if</span> (!repo-&gt;<a class="code" href="struct__Repo.html#a4eb2dd93e4a4f88f13d462f2f111e038">start</a> || repo-&gt;<a class="code" href="struct__Repo.html#a4eb2dd93e4a4f88f13d462f2f111e038">start</a> == repo-&gt;<a class="code" href="struct__Repo.html#aca3e16cc200b9c236963f56bf038a7bc">end</a>)
<a name="l00071"></a>00071     repo-&gt;<a class="code" href="struct__Repo.html#a4eb2dd93e4a4f88f13d462f2f111e038">start</a> = repo-&gt;<a class="code" href="struct__Repo.html#aca3e16cc200b9c236963f56bf038a7bc">end</a> = p;
<a name="l00072"></a>00072   <span class="comment">/* warning: sidedata must be extended before adapting start/end */</span>
<a name="l00073"></a>00073   <span class="keywordflow">if</span> (repo-&gt;<a class="code" href="struct__Repo.html#ad7b6bcb6cc9da76cbb67e26fc3c22884">rpmdbid</a>)
<a name="l00074"></a>00074     repo-&gt;<a class="code" href="struct__Repo.html#ad7b6bcb6cc9da76cbb67e26fc3c22884">rpmdbid</a> = (<a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> *)<a class="code" href="repo_8c.html#aeb3fa1a54d652d49e0813e7e5c6aa986">repo_sidedata_extend</a>(repo, repo-&gt;<a class="code" href="struct__Repo.html#ad7b6bcb6cc9da76cbb67e26fc3c22884">rpmdbid</a>, <span class="keyword">sizeof</span>(<a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a>), p, 1);
<a name="l00075"></a>00075   <span class="keywordflow">if</span> (p &lt; repo-&gt;start)
<a name="l00076"></a>00076     repo-&gt;<a class="code" href="struct__Repo.html#a4eb2dd93e4a4f88f13d462f2f111e038">start</a> = p;
<a name="l00077"></a>00077   <span class="keywordflow">if</span> (p + 1 &gt; repo-&gt;<a class="code" href="struct__Repo.html#aca3e16cc200b9c236963f56bf038a7bc">end</a>)
<a name="l00078"></a>00078     repo-&gt;<a class="code" href="struct__Repo.html#aca3e16cc200b9c236963f56bf038a7bc">end</a> = p + 1;
<a name="l00079"></a>00079   repo-&gt;<a class="code" href="struct__Repo.html#a71f8addb47dc90a36295f2993e30b24d">nsolvables</a>++;
<a name="l00080"></a>00080   repo-&gt;<a class="code" href="struct__Repo.html#a6bd8127a73ebfe52aa09498f969e0b47">pool</a>-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a>[p].<a class="code" href="struct__Solvable.html#a15e0b77fe061c6429a24215191b10f05">repo</a> = repo;
<a name="l00081"></a>00081   <span class="keywordflow">return</span> p;
<a name="l00082"></a>00082 }
<a name="l00083"></a>00083 
<a name="l00084"></a><a class="code" href="repo_8h.html#a2b8fbf0369a3dfe1deda98a26bcebea6">00084</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <a class="code" href="repo_8h.html#a2b8fbf0369a3dfe1deda98a26bcebea6">repo_add_solvable_block</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <span class="keywordtype">int</span> count)
<a name="l00085"></a>00085 {
<a name="l00086"></a>00086   <span class="keyword">extern</span> <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <a class="code" href="pool_8c.html#a2f2f801d71aed8c5f3902c869c82c8ca">pool_add_solvable_block</a>(<a class="code" href="struct__Pool.html">Pool</a> *pool, <span class="keywordtype">int</span> count);
<a name="l00087"></a>00087   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> p;
<a name="l00088"></a>00088   <a class="code" href="struct__Solvable.html">Solvable</a> *s;
<a name="l00089"></a>00089   <span class="keywordflow">if</span> (!count)
<a name="l00090"></a>00090     <span class="keywordflow">return</span> 0;
<a name="l00091"></a>00091   p = <a class="code" href="pool_8c.html#a2f2f801d71aed8c5f3902c869c82c8ca">pool_add_solvable_block</a>(repo-&gt;<a class="code" href="struct__Repo.html#a6bd8127a73ebfe52aa09498f969e0b47">pool</a>, count);
<a name="l00092"></a>00092   <span class="keywordflow">if</span> (!repo-&gt;<a class="code" href="struct__Repo.html#a4eb2dd93e4a4f88f13d462f2f111e038">start</a> || repo-&gt;<a class="code" href="struct__Repo.html#a4eb2dd93e4a4f88f13d462f2f111e038">start</a> == repo-&gt;<a class="code" href="struct__Repo.html#aca3e16cc200b9c236963f56bf038a7bc">end</a>)
<a name="l00093"></a>00093     repo-&gt;<a class="code" href="struct__Repo.html#a4eb2dd93e4a4f88f13d462f2f111e038">start</a> = repo-&gt;<a class="code" href="struct__Repo.html#aca3e16cc200b9c236963f56bf038a7bc">end</a> = p;
<a name="l00094"></a>00094   <span class="comment">/* warning: sidedata must be extended before adapting start/end */</span>
<a name="l00095"></a>00095   <span class="keywordflow">if</span> (repo-&gt;<a class="code" href="struct__Repo.html#ad7b6bcb6cc9da76cbb67e26fc3c22884">rpmdbid</a>)
<a name="l00096"></a>00096     repo-&gt;<a class="code" href="struct__Repo.html#ad7b6bcb6cc9da76cbb67e26fc3c22884">rpmdbid</a> = (<a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> *)<a class="code" href="repo_8c.html#aeb3fa1a54d652d49e0813e7e5c6aa986">repo_sidedata_extend</a>(repo, repo-&gt;<a class="code" href="struct__Repo.html#ad7b6bcb6cc9da76cbb67e26fc3c22884">rpmdbid</a>, <span class="keyword">sizeof</span>(<a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a>), p, count);
<a name="l00097"></a>00097   <span class="keywordflow">if</span> (p &lt; repo-&gt;start)
<a name="l00098"></a>00098     repo-&gt;<a class="code" href="struct__Repo.html#a4eb2dd93e4a4f88f13d462f2f111e038">start</a> = p;
<a name="l00099"></a>00099   <span class="keywordflow">if</span> (p + count &gt; repo-&gt;<a class="code" href="struct__Repo.html#aca3e16cc200b9c236963f56bf038a7bc">end</a>)
<a name="l00100"></a>00100     repo-&gt;<a class="code" href="struct__Repo.html#aca3e16cc200b9c236963f56bf038a7bc">end</a> = p + count;
<a name="l00101"></a>00101   repo-&gt;<a class="code" href="struct__Repo.html#a71f8addb47dc90a36295f2993e30b24d">nsolvables</a> += count;
<a name="l00102"></a>00102   <span class="keywordflow">for</span> (s = repo-&gt;<a class="code" href="struct__Repo.html#a6bd8127a73ebfe52aa09498f969e0b47">pool</a>-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a> + p; count--; s++)
<a name="l00103"></a>00103     s-&gt;<a class="code" href="struct__Solvable.html#a15e0b77fe061c6429a24215191b10f05">repo</a> = repo;
<a name="l00104"></a>00104   <span class="keywordflow">return</span> p;
<a name="l00105"></a>00105 }
<a name="l00106"></a>00106 
<a name="l00107"></a>00107 
<a name="l00108"></a><a class="code" href="repo_8h.html#ad2d411118e6dc06fdd38f7ec68c3bb32">00108</a> <span class="preprocessor">#define FOR_REPO_SOLVABLES(r, p, s)                                             \</span>
<a name="l00109"></a>00109 <span class="preprocessor">  for (p = (r)-&gt;start, s = (r)-&gt;pool-&gt;solvables + p; p &lt; (r)-&gt;end; p++, s = (r)-&gt;pool-&gt;solvables + p)   \</span>
<a name="l00110"></a>00110 <span class="preprocessor">    if (s-&gt;repo == (r))</span>
<a name="l00111"></a>00111 <span class="preprocessor"></span>
<a name="l00112"></a>00112 
<a name="l00113"></a>00113 <span class="comment">/* those two functions are here because they need the Repo definition */</span>
<a name="l00114"></a>00114 
<a name="l00115"></a><a class="code" href="repo_8h.html#aa6b8aca7447ff35088f1f942cf101a33">00115</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="struct__Repo.html">Repo</a> *<a class="code" href="repo_8h.html#aa6b8aca7447ff35088f1f942cf101a33">pool_id2repo</a>(<a class="code" href="struct__Pool.html">Pool</a> *pool, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> repoid)
<a name="l00116"></a>00116 {
<a name="l00117"></a>00117   <span class="keywordflow">return</span> repoid ? pool-&gt;<a class="code" href="struct__Pool.html#acd50c1c34cd96f8bf0b14bab7505aade">repos</a>[repoid - 1] : 0;
<a name="l00118"></a>00118 }
<a name="l00119"></a>00119 
<a name="l00120"></a><a class="code" href="repo_8h.html#a5549b2545f7256db4e7e5985a9701633">00120</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="repo_8h.html#a5549b2545f7256db4e7e5985a9701633">pool_installable</a>(<span class="keyword">const</span> <a class="code" href="struct__Pool.html">Pool</a> *pool, <a class="code" href="struct__Solvable.html">Solvable</a> *s)
<a name="l00121"></a>00121 {
<a name="l00122"></a>00122   <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="struct__Solvable.html#a51ba374144373934101befc2bd20150b">arch</a> || s-&gt;<a class="code" href="struct__Solvable.html#a51ba374144373934101befc2bd20150b">arch</a> == ARCH_SRC || s-&gt;<a class="code" href="struct__Solvable.html#a51ba374144373934101befc2bd20150b">arch</a> == ARCH_NOSRC)
<a name="l00123"></a>00123     <span class="keywordflow">return</span> 0;
<a name="l00124"></a>00124   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="struct__Solvable.html#a15e0b77fe061c6429a24215191b10f05">repo</a> &amp;&amp; s-&gt;<a class="code" href="struct__Solvable.html#a15e0b77fe061c6429a24215191b10f05">repo</a>-&gt;<a class="code" href="struct__Repo.html#a637e3e83a1a07551b8bf6e73a654083d">disabled</a>)
<a name="l00125"></a>00125     <span class="keywordflow">return</span> 0;
<a name="l00126"></a>00126   <span class="keywordflow">if</span> (pool-&gt;<a class="code" href="struct__Pool.html#ad924ffa18ddae53f5ce4d900090518f1">id2arch</a> &amp;&amp; (s-&gt;<a class="code" href="struct__Solvable.html#a51ba374144373934101befc2bd20150b">arch</a> &gt; pool-&gt;<a class="code" href="struct__Pool.html#a48262a3cab5b0399bda3d12a1d7cc0b8">lastarch</a> || !pool-&gt;<a class="code" href="struct__Pool.html#ad924ffa18ddae53f5ce4d900090518f1">id2arch</a>[s-&gt;<a class="code" href="struct__Solvable.html#a51ba374144373934101befc2bd20150b">arch</a>]))
<a name="l00127"></a>00127     <span class="keywordflow">return</span> 0;
<a name="l00128"></a>00128   <span class="keywordflow">if</span> (pool-&gt;<a class="code" href="struct__Pool.html#aee720c53632ce7d1bc83714e06159f78">considered</a>)
<a name="l00129"></a>00129     { 
<a name="l00130"></a>00130       <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <span class="keywordtype">id</span> = s - pool-&gt;<a class="code" href="struct__Pool.html#a9842c936aa241bad13ba13f21a337319">solvables</a>;
<a name="l00131"></a>00131       <span class="keywordflow">if</span> (!<a class="code" href="bitmap_8h.html#ad8ccb9ad3a8ad65f5fe08a988acc503d">MAPTST</a>(pool-&gt;<a class="code" href="struct__Pool.html#aee720c53632ce7d1bc83714e06159f78">considered</a>, <span class="keywordtype">id</span>))
<a name="l00132"></a>00132         <span class="keywordflow">return</span> 0;
<a name="l00133"></a>00133     }
<a name="l00134"></a>00134   <span class="keywordflow">return</span> 1;
<a name="l00135"></a>00135 }
<a name="l00136"></a>00136 
<a name="l00137"></a>00137 <span class="comment">/* search callback values */</span>
<a name="l00138"></a>00138 
<a name="l00139"></a><a class="code" href="repo_8h.html#a9fc3b6a54398b6b4073454f5f54fbbb3">00139</a> <span class="preprocessor">#define SEARCH_NEXT_KEY         1</span>
<a name="l00140"></a><a class="code" href="repo_8h.html#a3f11f18cc4bdf4a6740e2e9a978d31c5">00140</a> <span class="preprocessor"></span><span class="preprocessor">#define SEARCH_NEXT_SOLVABLE    2</span>
<a name="l00141"></a><a class="code" href="repo_8h.html#a7338cee0495b1030a5d117d9d6c0e440">00141</a> <span class="preprocessor"></span><span class="preprocessor">#define SEARCH_STOP             3</span>
<a name="l00142"></a><a class="code" href="repo_8h.html#ad0049eedf6509110e805e76d21647b6c">00142</a> <span class="preprocessor"></span><span class="preprocessor">#define SEARCH_ENTERSUB         -1</span>
<a name="l00143"></a>00143 <span class="preprocessor"></span>
<a name="l00144"></a><a class="code" href="struct__KeyValue.html">00144</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__KeyValue.html">_KeyValue</a> {
<a name="l00145"></a><a class="code" href="struct__KeyValue.html#ac2c2167e288ab3511dc6b419eff19877">00145</a>   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <a class="code" href="struct__KeyValue.html#ac2c2167e288ab3511dc6b419eff19877">id</a>;
<a name="l00146"></a><a class="code" href="struct__KeyValue.html#a8a1b531f7b4dceb9f8adf915faf48e08">00146</a>   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="struct__KeyValue.html#a8a1b531f7b4dceb9f8adf915faf48e08">str</a>;
<a name="l00147"></a><a class="code" href="struct__KeyValue.html#a53be9e6f6eda42668f97d1068476c862">00147</a>   <span class="keywordtype">int</span> <a class="code" href="struct__KeyValue.html#a53be9e6f6eda42668f97d1068476c862">num</a>;
<a name="l00148"></a><a class="code" href="struct__KeyValue.html#a84f14418316b9613684596fa502f28dd">00148</a>   <span class="keywordtype">int</span> <a class="code" href="struct__KeyValue.html#a84f14418316b9613684596fa502f28dd">num2</a>;
<a name="l00149"></a>00149 
<a name="l00150"></a><a class="code" href="struct__KeyValue.html#a23086a8c135644d2e2f58eb3093de16f">00150</a>   <span class="keywordtype">int</span> <a class="code" href="struct__KeyValue.html#a23086a8c135644d2e2f58eb3093de16f">entry</a>;    <span class="comment">/* array entry, starts with 0 */</span>
<a name="l00151"></a><a class="code" href="struct__KeyValue.html#ac00b09e153fc854a31f84663d2231276">00151</a>   <span class="keywordtype">int</span> <a class="code" href="struct__KeyValue.html#ac00b09e153fc854a31f84663d2231276">eof</a>;      <span class="comment">/* last entry reached */</span>
<a name="l00152"></a>00152 
<a name="l00153"></a><a class="code" href="struct__KeyValue.html#ac7e2d0faea310b979ac11cb2d1242b51">00153</a>   <span class="keyword">struct </span><a class="code" href="struct__KeyValue.html">_KeyValue</a> *<a class="code" href="struct__KeyValue.html#ac7e2d0faea310b979ac11cb2d1242b51">parent</a>;
<a name="l00154"></a>00154 } <a class="code" href="struct__KeyValue.html">KeyValue</a>;
<a name="l00155"></a>00155 
<a name="l00156"></a>00156 <span class="comment">/* search matcher flags */</span>
<a name="l00157"></a><a class="code" href="repo_8h.html#a8ee26062e635fd18dd8a7ff37fcb5f7a">00157</a> <span class="preprocessor">#define SEARCH_STRINGMASK               15</span>
<a name="l00158"></a><a class="code" href="repo_8h.html#a16d9123bca964403e89d0ed42f15166f">00158</a> <span class="preprocessor"></span><span class="preprocessor">#define SEARCH_STRING                   1</span>
<a name="l00159"></a><a class="code" href="repo_8h.html#abdae3974f1c35c47412e7136649b837c">00159</a> <span class="preprocessor"></span><span class="preprocessor">#define SEARCH_STRINGSTART              2</span>
<a name="l00160"></a><a class="code" href="repo_8h.html#a5c9202821826e20ceb97efee41573ece">00160</a> <span class="preprocessor"></span><span class="preprocessor">#define SEARCH_STRINGEND                3</span>
<a name="l00161"></a><a class="code" href="repo_8h.html#afc0bc2b0c7e86e4c81584bc0c5319c76">00161</a> <span class="preprocessor"></span><span class="preprocessor">#define SEARCH_SUBSTRING                4</span>
<a name="l00162"></a><a class="code" href="repo_8h.html#aad132dcd0fec8829adddcfa0f343c395">00162</a> <span class="preprocessor"></span><span class="preprocessor">#define SEARCH_GLOB                     5</span>
<a name="l00163"></a><a class="code" href="repo_8h.html#a5712c082264d458a56b90d6e0f06c172">00163</a> <span class="preprocessor"></span><span class="preprocessor">#define SEARCH_REGEX                    6</span>
<a name="l00164"></a><a class="code" href="repo_8h.html#aa95a23ed83ec736d0038afde41bd38a4">00164</a> <span class="preprocessor"></span><span class="preprocessor">#define SEARCH_ERROR                    15</span>
<a name="l00165"></a><a class="code" href="repo_8h.html#aaa11563a95c9305acc2cdc296e1c2d9a">00165</a> <span class="preprocessor"></span><span class="preprocessor">#define SEARCH_NOCASE                   (1&lt;&lt;7)</span>
<a name="l00166"></a>00166 <span class="preprocessor"></span>
<a name="l00167"></a>00167 <span class="comment">/* iterator control */</span>
<a name="l00168"></a><a class="code" href="repo_8h.html#a0e6d373c4ee8df5468cdec2f962b8860">00168</a> <span class="preprocessor">#define SEARCH_NO_STORAGE_SOLVABLE      (1&lt;&lt;8)</span>
<a name="l00169"></a><a class="code" href="repo_8h.html#ad8a0198ddf3601b5e24d14a8bcfe1dd0">00169</a> <span class="preprocessor"></span><span class="preprocessor">#define SEARCH_SUB                      (1&lt;&lt;9)</span>
<a name="l00170"></a><a class="code" href="repo_8h.html#aa15a5ace6684517dd9404253c76f6bd3">00170</a> <span class="preprocessor"></span><span class="preprocessor">#define SEARCH_ARRAYSENTINEL            (1&lt;&lt;10)</span>
<a name="l00171"></a><a class="code" href="repo_8h.html#aead6c1b8fa181a4620ea2ba1b488df46">00171</a> <span class="preprocessor"></span><span class="preprocessor">#define SEARCH_DISABLED_REPOS           (1&lt;&lt;11)</span>
<a name="l00172"></a><a class="code" href="repo_8h.html#ad4aebf30a44113d871bb8d176c60b516">00172</a> <span class="preprocessor"></span><span class="preprocessor">#define SEARCH_COMPLETE_FILELIST        (1&lt;&lt;12)</span>
<a name="l00173"></a>00173 <span class="preprocessor"></span>
<a name="l00174"></a>00174 <span class="comment">/* stringification flags */</span>
<a name="l00175"></a><a class="code" href="repo_8h.html#a90803a6b4271ee3c155d94dc0da779f5">00175</a> <span class="preprocessor">#define SEARCH_SKIP_KIND                (1&lt;&lt;16)</span>
<a name="l00176"></a>00176 <span class="preprocessor"></span><span class="comment">/* By default we stringify just to the basename of a file because</span>
<a name="l00177"></a>00177 <span class="comment">   the construction of the full filename is costly.  Specify this</span>
<a name="l00178"></a>00178 <span class="comment">   flag if you want to match full filenames */</span>
<a name="l00179"></a><a class="code" href="repo_8h.html#afd3b36731e144da9fbcaba15ed322a02">00179</a> <span class="preprocessor">#define SEARCH_FILES                    (1&lt;&lt;17)</span>
<a name="l00180"></a><a class="code" href="repo_8h.html#a4a424b8e163e046451ee0e2f195eebbd">00180</a> <span class="preprocessor"></span><span class="preprocessor">#define SEARCH_CHECKSUMS                (1&lt;&lt;18)</span>
<a name="l00181"></a>00181 <span class="preprocessor"></span>
<a name="l00182"></a>00182 <span class="comment">/* dataiterator internal */</span>
<a name="l00183"></a><a class="code" href="repo_8h.html#ac60ab962fbb05741fba495b73d3daaec">00183</a> <span class="preprocessor">#define SEARCH_THISSOLVID               (1&lt;&lt;31)</span>
<a name="l00184"></a>00184 <span class="preprocessor"></span>
<a name="l00185"></a>00185 
<a name="l00186"></a>00186 <span class="comment">/* standard flags used in the repo_add functions */</span>
<a name="l00187"></a><a class="code" href="repo_8h.html#ab7c8c37c3a522516d05cf2d40f8e3841">00187</a> <span class="preprocessor">#define REPO_REUSE_REPODATA             (1 &lt;&lt; 0)</span>
<a name="l00188"></a><a class="code" href="repo_8h.html#a72544e30be9cf3bd0a8f3ef922b55134">00188</a> <span class="preprocessor"></span><span class="preprocessor">#define REPO_NO_INTERNALIZE             (1 &lt;&lt; 1)</span>
<a name="l00189"></a><a class="code" href="repo_8h.html#a62b55a7182f0cd9d969b82a7ca0bab5a">00189</a> <span class="preprocessor"></span><span class="preprocessor">#define REPO_LOCALPOOL                  (1 &lt;&lt; 2)</span>
<a name="l00190"></a><a class="code" href="repo_8h.html#ae5c30cbf4f0c514c3cc22e79b3a95270">00190</a> <span class="preprocessor"></span><span class="preprocessor">#define REPO_USE_LOADING                (1 &lt;&lt; 3)</span>
<a name="l00191"></a><a class="code" href="repo_8h.html#af7ad299b44228b0132f2db8bd5c2d44a">00191</a> <span class="preprocessor"></span><span class="preprocessor">#define REPO_EXTEND_SOLVABLES           (1 &lt;&lt; 4)</span>
<a name="l00192"></a>00192 <span class="preprocessor"></span>
<a name="l00193"></a>00193 <a class="code" href="struct__Repodata.html">Repodata</a> *<a class="code" href="repo_8c.html#a26e7469a89ef78156d6a09ca4333909a">repo_add_repodata</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <span class="keywordtype">int</span> flags);
<a name="l00194"></a>00194 <a class="code" href="struct__Repodata.html">Repodata</a> *<a class="code" href="repo_8c.html#a7c14fda54935bdcac9c9c199aa12ee44">repo_last_repodata</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo);
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 <span class="keywordtype">void</span> <a class="code" href="repo_8c.html#acfa8ad01d505b448a6002c07eb03212a">repo_search</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> p, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> key, <span class="keyword">const</span> <span class="keywordtype">char</span> *match, <span class="keywordtype">int</span> flags, <span class="keywordtype">int</span> (*callback)(<span class="keywordtype">void</span> *cbdata, <a class="code" href="struct__Solvable.html">Solvable</a> *s, <a class="code" href="struct__Repodata.html">Repodata</a> *data, <a class="code" href="struct__Repokey.html">Repokey</a> *key, <a class="code" href="struct__KeyValue.html">KeyValue</a> *kv), <span class="keywordtype">void</span> *cbdata);
<a name="l00197"></a>00197 
<a name="l00198"></a>00198 <span class="comment">/* returns the string value of the attribute, or NULL if not found */</span>
<a name="l00199"></a>00199 <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="repo_8c.html#a3400ff5da984ddb3a8c410422c8b3c49">repo_lookup_str</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <a class="code" href="struct__KeyValue.html#a23086a8c135644d2e2f58eb3093de16f">entry</a>, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> key);
<a name="l00200"></a>00200 <span class="comment">/* returns the integer value of the attribute, or 0 if not found */</span>
<a name="l00201"></a>00201 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="repo_8c.html#a6c0b10c58941f727743a9ffd32b1c0cf">repo_lookup_num</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <a class="code" href="struct__KeyValue.html#a23086a8c135644d2e2f58eb3093de16f">entry</a>, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> key, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> notfound);
<a name="l00202"></a>00202 <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <a class="code" href="repo_8c.html#aecf6d0aba804d17b1772778ecd57ed92">repo_lookup_id</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <a class="code" href="struct__KeyValue.html#a23086a8c135644d2e2f58eb3093de16f">entry</a>, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> keyid);
<a name="l00203"></a>00203 <span class="keywordtype">int</span> <a class="code" href="repo_8c.html#a52ba8fffcbf9d41d35d142b8979362ca">repo_lookup_void</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <a class="code" href="struct__KeyValue.html#a23086a8c135644d2e2f58eb3093de16f">entry</a>, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> keyid);
<a name="l00204"></a>00204 <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="repo_8c.html#af49bd84e06de0c95c44c970d7b535e8b">repo_lookup_bin_checksum</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <a class="code" href="struct__KeyValue.html#a23086a8c135644d2e2f58eb3093de16f">entry</a>, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> keyid, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> *typep);
<a name="l00205"></a>00205 
<a name="l00206"></a><a class="code" href="struct__Datamatcher.html">00206</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__Datamatcher.html">_Datamatcher</a> {
<a name="l00207"></a><a class="code" href="struct__Datamatcher.html#ac10417eea51a6b1bb1b38c2689e13815">00207</a>   <span class="keywordtype">int</span> flags;
<a name="l00208"></a><a class="code" href="struct__Datamatcher.html#ab255b75703712356415a648a53d82144">00208</a>   <span class="keyword">const</span> <span class="keywordtype">char</span> *match;
<a name="l00209"></a><a class="code" href="struct__Datamatcher.html#a4c2214dfd1d478f5c83311bb7a2ec349">00209</a>   <span class="keywordtype">void</span> *<a class="code" href="structmatchdata.html">matchdata</a>;
<a name="l00210"></a><a class="code" href="struct__Datamatcher.html#aa1fe5a784380b6a4db30c0b11db952c3">00210</a>   <span class="keywordtype">int</span> <a class="code" href="struct__Datamatcher.html#aa1fe5a784380b6a4db30c0b11db952c3">error</a>;
<a name="l00211"></a>00211 } <a class="code" href="struct__Datamatcher.html">Datamatcher</a>;
<a name="l00212"></a>00212 
<a name="l00213"></a><a class="code" href="struct__Dataiterator.html">00213</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__Dataiterator.html">_Dataiterator</a>
<a name="l00214"></a>00214 {
<a name="l00215"></a><a class="code" href="struct__Dataiterator.html#ab90ebac92678950293e275664ae5624b">00215</a>   <span class="keywordtype">int</span> <a class="code" href="struct__Dataiterator.html#ab90ebac92678950293e275664ae5624b">state</a>;
<a name="l00216"></a><a class="code" href="struct__Dataiterator.html#ab02e8fb438d244328f1dcdbdec2c4b4b">00216</a>   <span class="keywordtype">int</span> flags;
<a name="l00217"></a>00217 
<a name="l00218"></a><a class="code" href="struct__Dataiterator.html#adc60c7ad972cd0982bd70792502f5399">00218</a>   <a class="code" href="struct__Pool.html">Pool</a> *<a class="code" href="struct__Dataiterator.html#adc60c7ad972cd0982bd70792502f5399">pool</a>;
<a name="l00219"></a><a class="code" href="struct__Dataiterator.html#a022475b6dc9750b6a0ab6030f3a7f3ab">00219</a>   <a class="code" href="struct__Repo.html">Repo</a> *repo;
<a name="l00220"></a><a class="code" href="struct__Dataiterator.html#a1b51c0e15bab00e8bc9d7f17514d7824">00220</a>   <a class="code" href="struct__Repodata.html">Repodata</a> *<a class="code" href="struct__Dataiterator.html#a1b51c0e15bab00e8bc9d7f17514d7824">data</a>;
<a name="l00221"></a>00221 
<a name="l00222"></a>00222   <span class="comment">/* data pointers */</span>
<a name="l00223"></a><a class="code" href="struct__Dataiterator.html#a2b2b4ea845f2f20068a63660d97c59f1">00223</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="struct__Dataiterator.html#a2b2b4ea845f2f20068a63660d97c59f1">dp</a>;
<a name="l00224"></a><a class="code" href="struct__Dataiterator.html#ab6771ccd295efa30b8a042311fb77368">00224</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="struct__Dataiterator.html#ab6771ccd295efa30b8a042311fb77368">ddp</a>;
<a name="l00225"></a><a class="code" href="struct__Dataiterator.html#ac02132397541c066f24501938505d2cf">00225</a>   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> *<a class="code" href="struct__Dataiterator.html#ac02132397541c066f24501938505d2cf">idp</a>;
<a name="l00226"></a><a class="code" href="struct__Dataiterator.html#a57338401bbca96d4c058fd1cf7b14ab2">00226</a>   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> *<a class="code" href="struct__Dataiterator.html#a57338401bbca96d4c058fd1cf7b14ab2">keyp</a>;
<a name="l00227"></a>00227 
<a name="l00228"></a>00228   <span class="comment">/* the result */</span>
<a name="l00229"></a><a class="code" href="struct__Dataiterator.html#a2c8f1b49924cfe4cfcee0c9a04a7aa2c">00229</a>   <a class="code" href="struct__Repokey.html">Repokey</a> *key;
<a name="l00230"></a><a class="code" href="struct__Dataiterator.html#a9585176503a6fa06462c9191d58180ff">00230</a>   <a class="code" href="struct__KeyValue.html">KeyValue</a> <a class="code" href="struct__Dataiterator.html#a9585176503a6fa06462c9191d58180ff">kv</a>;
<a name="l00231"></a>00231 
<a name="l00232"></a>00232   <span class="comment">/* our matcher */</span>
<a name="l00233"></a><a class="code" href="struct__Dataiterator.html#ab72d8f149eaaad58564a4bf07da5fcba">00233</a>   <a class="code" href="struct__Datamatcher.html">Datamatcher</a> <a class="code" href="struct__Dataiterator.html#ab72d8f149eaaad58564a4bf07da5fcba">matcher</a>;
<a name="l00234"></a>00234 
<a name="l00235"></a>00235   <span class="comment">/* iterators/filters */</span>
<a name="l00236"></a><a class="code" href="struct__Dataiterator.html#afbcbda8cff39fd754da398787901d48a">00236</a>   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <a class="code" href="struct__Dataiterator.html#afbcbda8cff39fd754da398787901d48a">keyname</a>;
<a name="l00237"></a><a class="code" href="struct__Dataiterator.html#ad404c05bdd21017803e028b7ef1cb7b9">00237</a>   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <a class="code" href="struct__Dataiterator.html#ad404c05bdd21017803e028b7ef1cb7b9">repodataid</a>;
<a name="l00238"></a><a class="code" href="struct__Dataiterator.html#a08c41d1514a030f538956337e428dea2">00238</a>   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <a class="code" href="struct__Dataiterator.html#a08c41d1514a030f538956337e428dea2">solvid</a>;
<a name="l00239"></a><a class="code" href="struct__Dataiterator.html#a9b8c7b947cf05fc58c47a9eb59427757">00239</a>   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <a class="code" href="struct__Dataiterator.html#a9b8c7b947cf05fc58c47a9eb59427757">repoid</a>;
<a name="l00240"></a>00240 
<a name="l00241"></a><a class="code" href="struct__Dataiterator.html#a4b223680098a44822d68d5fd124f2a32">00241</a>   <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <a class="code" href="struct__Dataiterator.html#a4b223680098a44822d68d5fd124f2a32">keynames</a>[3 + 1];
<a name="l00242"></a><a class="code" href="struct__Dataiterator.html#a869d92603171464e49906827442a1cc4">00242</a>   <span class="keywordtype">int</span> <a class="code" href="struct__Dataiterator.html#a869d92603171464e49906827442a1cc4">nkeynames</a>;
<a name="l00243"></a><a class="code" href="struct__Dataiterator.html#ab8a3fdf2fd62dae6373a31481490844b">00243</a>   <span class="keywordtype">int</span> <a class="code" href="struct__Dataiterator.html#ab8a3fdf2fd62dae6373a31481490844b">rootlevel</a>;
<a name="l00244"></a>00244 
<a name="l00245"></a>00245   <span class="comment">/* recursion data */</span>
<a name="l00246"></a><a class="code" href="struct__Dataiterator_1_1di__parent.html">00246</a>   <span class="keyword">struct </span><a class="code" href="struct__Dataiterator_1_1di__parent.html">di_parent</a> {
<a name="l00247"></a><a class="code" href="struct__Dataiterator_1_1di__parent.html#a0492155ac07afdae3131ff19d15aa52f">00247</a>     <a class="code" href="struct__KeyValue.html">KeyValue</a> <a class="code" href="struct__Dataiterator_1_1di__parent.html#a0492155ac07afdae3131ff19d15aa52f">kv</a>;
<a name="l00248"></a><a class="code" href="struct__Dataiterator_1_1di__parent.html#a7e854da793ed24c546ef669d2811b05b">00248</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="struct__Dataiterator_1_1di__parent.html#a7e854da793ed24c546ef669d2811b05b">dp</a>;
<a name="l00249"></a><a class="code" href="struct__Dataiterator_1_1di__parent.html#a52f830d1ac809306fd6c1c472a947d71">00249</a>     <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> *<a class="code" href="struct__Dataiterator_1_1di__parent.html#a52f830d1ac809306fd6c1c472a947d71">keyp</a>;
<a name="l00250"></a>00250   } <a class="code" href="struct__Dataiterator.html#a0d83f596294d6d1f356f6ada9e4af7ce">parents</a>[3];
<a name="l00251"></a><a class="code" href="struct__Dataiterator.html#a93d1c8a5dd631f601259591d1c59799f">00251</a>   <span class="keywordtype">int</span> <a class="code" href="struct__Dataiterator.html#a93d1c8a5dd631f601259591d1c59799f">nparents</a>;
<a name="l00252"></a>00252 
<a name="l00253"></a>00253 } <a class="code" href="struct__Dataiterator.html">Dataiterator</a>;
<a name="l00254"></a>00254 
<a name="l00255"></a>00255 <span class="keywordtype">int</span> <a class="code" href="repo_8h.html#a82c5932323fcae1e73d271c185786360">datamatcher_init</a>(<a class="code" href="struct__Datamatcher.html">Datamatcher</a> *ma, <span class="keyword">const</span> <span class="keywordtype">char</span> *match, <span class="keywordtype">int</span> flags);
<a name="l00256"></a>00256 <span class="keywordtype">void</span> <a class="code" href="repo_8h.html#af5de82202c5fe51786645f3f2f8c4da7">datamatcher_free</a>(<a class="code" href="struct__Datamatcher.html">Datamatcher</a> *ma);
<a name="l00257"></a>00257 <span class="keywordtype">int</span> <a class="code" href="repo_8h.html#a45722140e76b5677c65f87cef35bf4e7">datamatcher_match</a>(<a class="code" href="struct__Datamatcher.html">Datamatcher</a> *ma, <span class="keyword">const</span> <span class="keywordtype">char</span> *str);
<a name="l00258"></a>00258 
<a name="l00259"></a>00259 <span class="comment">/*</span>
<a name="l00260"></a>00260 <span class="comment"> * Dataiterator</span>
<a name="l00261"></a>00261 <span class="comment"> * </span>
<a name="l00262"></a>00262 <span class="comment"> * Iterator like interface to &#39;search&#39; functionality</span>
<a name="l00263"></a>00263 <span class="comment"> * </span>
<a name="l00264"></a>00264 <span class="comment"> * Dataiterator is per-pool, additional filters can be applied</span>
<a name="l00265"></a>00265 <span class="comment"> * to limit the search domain. See dataiterator_init below.</span>
<a name="l00266"></a>00266 <span class="comment"> * </span>
<a name="l00267"></a>00267 <span class="comment"> * Use these like:</span>
<a name="l00268"></a>00268 <span class="comment"> *    Dataiterator di;</span>
<a name="l00269"></a>00269 <span class="comment"> *    dataiterator_init(&amp;di, repo-&gt;pool, repo, 0, 0, &quot;bla&quot;, SEARCH_SUBSTRING);</span>
<a name="l00270"></a>00270 <span class="comment"> *    while (dataiterator_step(&amp;di))</span>
<a name="l00271"></a>00271 <span class="comment"> *      dosomething(di.solvid, di.key, di.kv);</span>
<a name="l00272"></a>00272 <span class="comment"> *    dataiterator_free(&amp;di);</span>
<a name="l00273"></a>00273 <span class="comment"> */</span>
<a name="l00274"></a>00274 
<a name="l00275"></a>00275 <span class="comment">/*</span>
<a name="l00276"></a>00276 <span class="comment"> * Initialize dataiterator</span>
<a name="l00277"></a>00277 <span class="comment"> * </span>
<a name="l00278"></a>00278 <span class="comment"> * di:      Pointer to Dataiterator to be initialized</span>
<a name="l00279"></a>00279 <span class="comment"> * pool:    Search domain for the iterator</span>
<a name="l00280"></a>00280 <span class="comment"> * repo:    if non-null, limit search to this repo</span>
<a name="l00281"></a>00281 <span class="comment"> * solvid:  if non-null, limit search to this solvable</span>
<a name="l00282"></a>00282 <span class="comment"> * keyname: if non-null, limit search to this keyname</span>
<a name="l00283"></a>00283 <span class="comment"> * match:   if non-null, limit search to this match</span>
<a name="l00284"></a>00284 <span class="comment"> */</span>
<a name="l00285"></a>00285 <span class="keywordtype">int</span> <a class="code" href="repo_8h.html#a0c6e9c54b80dd3ddd18863e636d7a6c4">dataiterator_init</a>(<a class="code" href="struct__Dataiterator.html">Dataiterator</a> *di, <a class="code" href="struct__Pool.html">Pool</a> *pool, <a class="code" href="struct__Repo.html">Repo</a> *repo, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> p, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> keyname, <span class="keyword">const</span> <span class="keywordtype">char</span> *match, <span class="keywordtype">int</span> flags);
<a name="l00286"></a>00286 <span class="keywordtype">void</span> <a class="code" href="repo_8h.html#a7cf60f3b31680fcb8a99d2207a7636f0">dataiterator_init_clone</a>(<a class="code" href="struct__Dataiterator.html">Dataiterator</a> *di, <a class="code" href="struct__Dataiterator.html">Dataiterator</a> *from);
<a name="l00287"></a>00287 <span class="keywordtype">void</span> <a class="code" href="repo_8h.html#af744e61a4b24b50c7342216c7bb9e2f8">dataiterator_set_search</a>(<a class="code" href="struct__Dataiterator.html">Dataiterator</a> *di, <a class="code" href="struct__Repo.html">Repo</a> *repo, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> p);
<a name="l00288"></a>00288 <span class="keywordtype">void</span> <a class="code" href="repo_8h.html#a09d9734610ca8ce1c7d8b7521a40e3c7">dataiterator_set_keyname</a>(<a class="code" href="struct__Dataiterator.html">Dataiterator</a> *di, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> keyname);
<a name="l00289"></a>00289 <span class="keywordtype">int</span> <a class="code" href="repo_8h.html#a371eca169dbc4c37999928844a9a1fdb">dataiterator_set_match</a>(<a class="code" href="struct__Dataiterator.html">Dataiterator</a> *di, <span class="keyword">const</span> <span class="keywordtype">char</span> *match, <span class="keywordtype">int</span> flags);
<a name="l00290"></a>00290 
<a name="l00291"></a>00291 <span class="keywordtype">void</span> <a class="code" href="repo_8h.html#a3e82dc62e43d56d82447cffd7da91e2a">dataiterator_prepend_keyname</a>(<a class="code" href="struct__Dataiterator.html">Dataiterator</a> *di, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> keyname);
<a name="l00292"></a>00292 <span class="keywordtype">void</span> <a class="code" href="repo_8h.html#a15ca4189f4908205c54320854afd5234">dataiterator_free</a>(<a class="code" href="struct__Dataiterator.html">Dataiterator</a> *di);
<a name="l00293"></a>00293 <span class="keywordtype">int</span> <a class="code" href="repo_8h.html#ab1b34ce2f9487195214beb0f68ed24ee">dataiterator_step</a>(<a class="code" href="struct__Dataiterator.html">Dataiterator</a> *di);
<a name="l00294"></a>00294 <span class="keywordtype">void</span> <a class="code" href="repo_8h.html#a7f8674178c87d2388b6471106719a98d">dataiterator_setpos</a>(<a class="code" href="struct__Dataiterator.html">Dataiterator</a> *di);
<a name="l00295"></a>00295 <span class="keywordtype">void</span> <a class="code" href="repo_8h.html#aed060a524b3476f0b001bf83a59b9e57">dataiterator_setpos_parent</a>(<a class="code" href="struct__Dataiterator.html">Dataiterator</a> *di);
<a name="l00296"></a>00296 <span class="keywordtype">int</span> <a class="code" href="repo_8h.html#a5e568fb248c85b5c83ffaf729297afde">dataiterator_match</a>(<a class="code" href="struct__Dataiterator.html">Dataiterator</a> *di, <a class="code" href="struct__Datamatcher.html">Datamatcher</a> *ma);
<a name="l00297"></a>00297 <span class="keywordtype">void</span> <a class="code" href="repo_8h.html#a209c1e2729d1a3c122d48cd19bb33786">dataiterator_skip_attribute</a>(<a class="code" href="struct__Dataiterator.html">Dataiterator</a> *di);
<a name="l00298"></a>00298 <span class="keywordtype">void</span> <a class="code" href="repo_8h.html#ae8cd2056fa20cb452a38a27f305a57ad">dataiterator_skip_solvable</a>(<a class="code" href="struct__Dataiterator.html">Dataiterator</a> *di);
<a name="l00299"></a>00299 <span class="keywordtype">void</span> <a class="code" href="repo_8h.html#a0890d65884941c175eec7325db00dc81">dataiterator_skip_repo</a>(<a class="code" href="struct__Dataiterator.html">Dataiterator</a> *di);
<a name="l00300"></a>00300 <span class="keywordtype">void</span> <a class="code" href="repo_8h.html#a126c7f8a90e1fcf5ccf051551f48174d">dataiterator_jump_to_solvid</a>(<a class="code" href="struct__Dataiterator.html">Dataiterator</a> *di, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> solvid);
<a name="l00301"></a>00301 <span class="keywordtype">void</span> <a class="code" href="repo_8h.html#a1ffe442dc44f3dcbcc81ab340333eea3">dataiterator_jump_to_repo</a>(<a class="code" href="struct__Dataiterator.html">Dataiterator</a> *di, <a class="code" href="struct__Repo.html">Repo</a> *repo);
<a name="l00302"></a>00302 <span class="keywordtype">void</span> <a class="code" href="repo_8h.html#adbdb8c13c3e86258008e48dff6ee7e81">dataiterator_entersub</a>(<a class="code" href="struct__Dataiterator.html">Dataiterator</a> *di);
<a name="l00303"></a>00303 <span class="keywordtype">void</span> <a class="code" href="repo_8h.html#a429707f48bc7b2d099e6ac28a7e51e8f">dataiterator_clonepos</a>(<a class="code" href="struct__Dataiterator.html">Dataiterator</a> *di, <a class="code" href="struct__Dataiterator.html">Dataiterator</a> *from);
<a name="l00304"></a>00304 <span class="keywordtype">void</span> <a class="code" href="repo_8h.html#a2e2ad3238eaa61d3196f621294961d30">dataiterator_seek</a>(<a class="code" href="struct__Dataiterator.html">Dataiterator</a> *di, <span class="keywordtype">int</span> whence);
<a name="l00305"></a>00305 
<a name="l00306"></a><a class="code" href="repo_8h.html#a17c898f5ebe1d0af66f208405beea9db">00306</a> <span class="preprocessor">#define DI_SEEK_STAY    (1 &lt;&lt; 16)</span>
<a name="l00307"></a><a class="code" href="repo_8h.html#a2bd9aa2a005719217fe1fa8bc6ffa65a">00307</a> <span class="preprocessor"></span><span class="preprocessor">#define DI_SEEK_CHILD   1</span>
<a name="l00308"></a><a class="code" href="repo_8h.html#aa746a2104aa971f067445e1b7e6860fe">00308</a> <span class="preprocessor"></span><span class="preprocessor">#define DI_SEEK_PARENT  2</span>
<a name="l00309"></a><a class="code" href="repo_8h.html#a71f589334d4fc0ccdcc5bfd9a43006c9">00309</a> <span class="preprocessor"></span><span class="preprocessor">#define DI_SEEK_REWIND  3</span>
<a name="l00310"></a>00310 <span class="preprocessor"></span>
<a name="l00311"></a>00311 
<a name="l00312"></a>00312 <span class="keywordtype">void</span> <a class="code" href="repo_8c.html#a42e9f347f1d3f88f104b4d30e0d2faa9">repo_set_id</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> p, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> keyname, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> <span class="keywordtype">id</span>);
<a name="l00313"></a>00313 <span class="keywordtype">void</span> <a class="code" href="repo_8c.html#ac45483ebe07fdcf779649fc304aa7e1f">repo_set_num</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> p, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> keyname, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> num);
<a name="l00314"></a>00314 <span class="keywordtype">void</span> <a class="code" href="repo_8c.html#a634b6f384e6e790c995872090c42c492">repo_set_str</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> p, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> keyname, <span class="keyword">const</span> <span class="keywordtype">char</span> *str);
<a name="l00315"></a>00315 <span class="keywordtype">void</span> <a class="code" href="repo_8c.html#ad23266e28ab3fe776cd44da42617fab4">repo_set_poolstr</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> p, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> keyname, <span class="keyword">const</span> <span class="keywordtype">char</span> *str);
<a name="l00316"></a>00316 <span class="keywordtype">void</span> <a class="code" href="repo_8c.html#a5f04f217a0d0808e3eb4d61dbea4bcc7">repo_add_poolstr_array</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> p, <a class="code" href="pooltypes_8h.html#a2e0e6278ac51842ca3aeb53e3fc3ead6">Id</a> keyname, <span class="keyword">const</span> <span class="keywordtype">char</span> *str);
<a name="l00317"></a>00317 <span class="keywordtype">void</span> <a class="code" href="repo_8c.html#ac8b3b76b45df8667a0231244b8fee9c8">repo_internalize</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo);
<a name="l00318"></a>00318 <span class="keywordtype">void</span> <a class="code" href="repo_8c.html#a4ef5da68f8498abe61969a01bd5b6c83">repo_disable_paging</a>(<a class="code" href="struct__Repo.html">Repo</a> *repo);
<a name="l00319"></a>00319 
<a name="l00320"></a>00320 <span class="preprocessor">#endif </span><span class="comment">/* SATSOLVER_REPO_H */</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Sun Oct 17 2010 15:21:22 for satsolver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
